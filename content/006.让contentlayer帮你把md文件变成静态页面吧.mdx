---
title: è®©contentlayerå¸®ä½ æŠŠmdæ–‡ä»¶å˜æˆé™æ€é¡µé¢å§
description: contentlayerå¯ä»¥å¸®åŠ©ä½ æŠŠmdxæ–‡ä»¶è½¬æˆé™æ€é¡µé¢ï¼Œæœ‰äº†å®ƒï¼Œä½ å¯ä»¥ä¸“æ³¨å†™markdownæ–‡ä»¶ï¼Œç„¶åè‡ªåŠ¨è·å¾—è§£æåçš„é¡µé¢ã€‚
slug: integrate-contentlayer
slugId: 49744a7c-f56b-43d7-8864-693ed3efa1a5
tags: NextJS,NextJSå®æˆ˜,Markdown
date: 2023-08-15
---

## **Contentlayer æ˜¯ä»€ä¹ˆ**

[Contentlayer](https://www.contentlayer.dev/) æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä¸“ä¸ºæ„å»ºå’Œç®¡ç†é™æ€é¡µé¢ã€ç½‘ç«™å’Œåšå®¢è€Œè®¾è®¡ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•è€Œçµæ´»çš„æ–¹å¼æ¥åˆ›å»ºå’Œç»„ç»‡å†…å®¹ï¼Œå¯ä»¥å°†`Markdown`æ–‡ä»¶è½¬æ¢ä¸ºé™æ€`HTML`é¡µé¢ã€‚

## **Contentlayer æœ‰ä»€ä¹ˆç”¨**

- **å†…å®¹å»ºæ¨¡ï¼š** Contentlayer æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥å®šä¹‰ä¸åŒç±»å‹çš„å†…å®¹ï¼Œå¦‚æ–‡ç« ã€é¡µé¢ã€ä½œè€…ç­‰ï¼Œå¹¶ä¸ºæ¯ä¸ªç±»å‹å®šä¹‰å­—æ®µå’Œå…³è”å…³ç³»ã€‚
- **Markdownæ”¯æŒï¼š** Contentlayer ä½¿ç”¨`Markdown`æ–‡ä»¶ä½œä¸ºå†…å®¹æºï¼Œå®ƒå¯ä»¥æŠŠä½ å†™çš„`MDX`æ–‡ä»¶è§£æä¸º`HTML`ï¼Œå¹¶ç”Ÿæˆé™æ€é¡µé¢æˆ–åµŒå…¥åˆ°å…¶ä»–é™æ€é¡µé¢ä¸­ã€‚
- **é™æ€ç½‘ç«™ç”Ÿæˆï¼š** å¦‚ä¸Šæ‰€è¿°ï¼Œä½ ä¹Ÿå¯ä»¥åˆ©ç”¨`Markdown`æ”¯æŒè½»æ¾ç”Ÿæˆå’Œæ›´æ–°ä½ çš„é™æ€ç½‘ç«™ã€‚
- **è‡ªå®šä¹‰æ¸²æŸ“ï¼š** Contentlayer å…è®¸ä½ è‡ªå®šä¹‰`React`ç»„ä»¶æ¥æ›¿æ¢æˆ–æ‰©å±•é»˜è®¤çš„Markdownæ¸²æŸ“å™¨ï¼Œä»¥å®ç°æ›´å¤šä½ æƒ³è¦çš„æ ·å¼ã€‚

## ä½¿ç”¨æ­¥éª¤

Contentlayer ä½¿ç”¨æ–¹æ³•ä¹ä¸€çœ‹å®¹æ˜“ä¸€å¤´é›¾æ°´ï¼Œç”¨å®Œä¹‹ååˆå®¹æ˜“å¿˜è®°ä¸€äº›ç»†èŠ‚ï¼Œæ‰€ä»¥éœ€è¦è®°å½•ä¸‹ä½¿ç”¨æ­¥éª¤ã€‚

ä»¥ä¸‹ç¤ºä¾‹åŸºäº`NextJS 13.x`ç‰ˆæœ¬çš„`app router`å®ç°ã€‚

1. å®‰è£…ä¾èµ–

```bash
pnpm i @types/mdx concurrently contentlayer next-contentlayer -S 
```

å†å®‰è£…å‡ ä¸ªmarkdownæ’ä»¶ï¼Œè¿™äº›æ’ä»¶å¯ä»¥å¢å¼ºmarkdownæ¸²æŸ“æ ·å¼ï¼Œå¹¶éæ¯ä¸ªéƒ½éœ€è¦ï¼ŒæŒ‘è‡ªå·±éœ€è¦çš„å®‰è£…ï¼Œä¹Ÿå¯ä»¥å…¨éƒ¨å®‰è£…æ…¢æ…¢äº«ç”¨

```bash
pnpm i remark-gfm -S
```

å¦‚æœä½ æƒ³é—®è¿™äº›`rehype`å’Œ`remark`æ’ä»¶éƒ½æ˜¯ä»€ä¹ˆä½œç”¨ï¼Œè¯·çŒ›å‡»ğŸ‘‰[ä¸€äº›å¥½ç”¨çš„Markdownä¼˜åŒ–æ’ä»¶](/article/markdown-lib)

1. åˆ›å»ºContentlayeré…ç½®æ–‡ä»¶ï¼Œå®šä¹‰å†…å®¹æ¨¡å‹å’Œæ•°æ®æº
    
    åœ¨ä½ çš„Next.jsé¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º**`contentlayer.config.js`**çš„æ–‡ä»¶ï¼Œå¹¶å¼€å§‹å®šä¹‰å†…å®¹æ¨¡å‹å’Œé…ç½®é€‰é¡¹ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰ä¸åŒç±»å‹çš„å†…å®¹ï¼Œå¦‚æ–‡ç« ã€é¡µé¢ç­‰ï¼Œå¹¶ä¸ºæ¯ä¸ªç±»å‹å®šä¹‰å­—æ®µå’Œå…³è”å…³ç³»ã€‚
    
    ä¸Šä»£ç å’Œæ³¨é‡Šï¼š
    
    ```jsx
    import { defineDocumentType, makeSource } from 'contentlayer/source-files'
    import remarkGfm from 'remark-gfm'
    
    /** @type {import('contentlayer/source-files').ComputedFields} */
    const computedFields = {
      slug: {
        type: "string",
        resolve: (doc) => `/${doc._raw.flattenedPath}`,
      },
      slugAsParams: {
        type: "string",
        resolve: (doc) => doc._raw.flattenedPath.split("/").slice(1).join("/"),
      },
    }
    
    // defineDocumentType å®šä¹‰æ–‡æ¡£ç±»å‹ã€‚å¯ä»¥è¿™ä¸ªå‚è€ƒæ ¼å¼å®šä¹‰å¤šç§æ–‡æ¡£ã€‚
    export const Post = defineDocumentType(() => ({
      name: "Post",
      filePathPattern: `**/*.mdx`, // æŒ‡å®šåŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼
      contentType: "mdx", // æŒ‡å®šäº†æ–‡æ¡£ç±»å‹ä¸º mdx
      fields: { // å®šä¹‰æ–‡æ¡£çš„å­—æ®µç»“æ„ï¼Œå› ä¸ºæˆ‘æ¥ä¸‹æ¥çš„ç¤ºä¾‹ä¸­åªç”¨åˆ°titleå’Œdescriptionå­—æ®µï¼Œæ‰€ä»¥å…¶ä»–å­—æ®µè¢«æˆ‘æ³¨é‡Šæ‰äº†ã€‚å¦‚æœæ­¤å¤„é…ç½®çš„å­—æ®µå’Œå®é™…mdxæ–‡ä»¶ä¸­ç”¨åˆ°çš„ä¸ä¸€æ ·ï¼Œç¼–è¯‘ä¼šæŠ¥é”™
        title: {
          type: "string",
          required: true,
        },
        description: {
          type: "string",
        },
        // date: {
        //   type: "date",
        //   required: true,
        // },
        // published: {
        //   type: "boolean",
        //   default: true,
        // },
        // image: {
        //   type: "string",
        //   required: true,
        // },
        // authors: {
        //   // Reference types are not embedded.
        //   // Until this is fixed, we can use a simple list.
        //   // type: "reference",
        //   // of: Author,
        //   type: "list",
        //   of: { type: "string" },
        //   required: true,
        // },
      },
      computedFields,
    }))
    
    // makeSource åˆ›å»ºæ•°æ®æº
    export default makeSource({
      contentDirPath: "./content", // æŒ‡å®šå†…å®¹æ–‡ä»¶çš„ç›®å½•è·¯å¾„
      documentTypes: [Post], // æŒ‡å®šä½¿ç”¨çš„æ–‡æ¡£ç±»å‹ï¼Œæ”¯æŒå¤šä¸ª
      mdx: { // é…ç½®MDXè§£æå™¨çš„æ’ä»¶
        remarkPlugins: [remarkGfm],
      },
    })
    ```
    
2. æ·»åŠ styles/mdx.css
    
    è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œä½œç”¨æ˜¯å®šä¹‰æ ·å¼è§„åˆ™ï¼Œç”¨äºç¾åŒ–æ¸²æŸ“åçš„ä»£ç å—
    
    ```css
    [data-rehype-pretty-code-fragment] code {
      @apply grid min-w-full break-words rounded-none border-0 bg-transparent p-0 text-sm text-black;
      counter-reset: line;
      box-decoration-break: clone;
    }
    [data-rehype-pretty-code-fragment] .line {
      @apply px-4 py-1;
    }
    [data-rehype-pretty-code-fragment] [data-line-numbers] > .line::before {
      counter-increment: line;
      content: counter(line);
      display: inline-block;
      width: 1rem;
      margin-right: 1rem;
      text-align: right;
      color: gray;
    }
    [data-rehype-pretty-code-fragment] .line--highlighted {
      @apply bg-slate-300 bg-opacity-10;
    }
    [data-rehype-pretty-code-fragment] .line-highlighted span {
      @apply relative;
    }
    [data-rehype-pretty-code-fragment] .word--highlighted {
      @apply rounded-md bg-slate-300 bg-opacity-10 p-1;
    }
    [data-rehype-pretty-code-title] {
      @apply mt-4 py-2 px-4 text-sm font-medium;
    }
    [data-rehype-pretty-code-title] + pre {
      @apply mt-0;
    }
    ```
    
3. ç¼–è¾‘`tsconfig.json`
    
    **`"paths"`**Â å­—æ®µç”¨äºé…ç½®æ¨¡å—è§£æçš„è·¯å¾„æ˜ å°„
    
    **`"include"`**Â å­—æ®µç”¨äºæŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­çš„æ–‡ä»¶æˆ–ç›®å½•
    
    åœ¨è¿™ä¸¤ä¸ªå­—æ®µé‡Œæ·»åŠ `contentlayer`çš„é…ç½®
    
    ```json
    {
    â€¦â€¦
    "baseUrl": ".", // æ·»åŠ æœ¬è¡Œ
    "paths": {
    	â€¦â€¦
      "contentlayer/generated": ["./.contentlayer/generated"] // æ·»åŠ æœ¬è¡Œï¼Œè¿™æ˜¯åé¢markdownæ–‡ä»¶ç¼–è¯‘åå­˜æ”¾çš„ç›®å½•
    },
    â€¦â€¦
    "include": [
      â€¦â€¦
      ".contentlayer/generated" // æ·»åŠ æœ¬è¡Œ
    ],
    }
    ```
    
4. ç”¨`withContentLayer`æ›´æ–°next configé…ç½®
    
    å…ˆæŠŠ`next.config.js`æ”¹ä¸º`next.config.mjs`ä»¥æ”¯æŒ`ES import`
    
    ```jsx
    import { withContentlayer } from "next-contentlayer"
    
    /** @type {import('next').NextConfig} */
    const nextConfig = {
    	â€¦â€¦
    }
    
    export default withContentlayer(nextConfig)
    ```
    
5. é…ç½®åŸºæœ¬å®Œæˆäº†ï¼Œç°åœ¨å¼€å§‹å†™mdæ¸²æŸ“ç»„ä»¶
    
    åˆ›å»º`components/mdx`æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ†åˆ«åˆ›å»º`callout.tsx` `mdx-card.tsx` `mdx-components.tsx`ä¸‰ä¸ªæ–‡ä»¶ã€‚æœ€å`markdown`é¡µé¢å¥½ä¸å¥½çœ‹å…¨é è¿™ä¸‰ä¸ªæ–‡ä»¶äº†
    
    ```tsx
    // callout.tsx
    import { cn } from "@/lib/utils"
    
    interface CalloutProps {
      icon?: string
      children?: React.ReactNode
      type?: "default" | "warning" | "danger"
    }
    
    export function Callout({
      children,
      icon,
      type = "default",
      ...props
    }: CalloutProps) {
      return (
        <div
          className={cn("my-6 flex items-start rounded-md border border-l-4 p-4", {
            "border-red-900 bg-red-50": type === "danger",
            "border-yellow-900 bg-yellow-50": type === "warning",
          })}
          {...props}
        >
          {icon && <span className="mr-4 text-2xl">{icon}</span>}
          <div>{children}</div>
        </div>
      )
    }	
    ```
    
    ```tsx
    // mdx-card.tsx
    import Link from "next/link"
    
    import { cn } from "@/lib/utils"
    
    interface CardProps extends React.HTMLAttributes<HTMLDivElement> {
      href?: string
      disabled?: boolean
    }
    
    export function MdxCard({
      href,
      className,
      children,
      disabled,
      ...props
    }: CardProps) {
      return (
        <div
          className={cn(
            "group relative rounded-lg border p-6 shadow-md transition-shadow hover:shadow-lg",
            disabled && "cursor-not-allowed opacity-60",
            className
          )}
          {...props}
        >
          <div className="flex flex-col justify-between space-y-4">
            <div className="space-y-2 [&>h3]:!mt-0 [&>h4]:!mt-0 [&>p]:text-muted-foreground">
              {children}
            </div>
          </div>
          {href && (
            <Link href={disabled ? "#" : href} className="absolute inset-0">
              <span className="sr-only">View</span>
            </Link>
          )}
        </div>
      )
    }
    ```
    
    ```tsx
    // mdx-components.tsx
    import * as React from "react";
    import Image from "next/image";
    import { useMDXComponent } from "next-contentlayer/hooks";
    import type { MDXComponents } from "mdx/types";
    
    import { cn } from "@/lib/utils";
    import { Callout } from "@/components/mdx/callout";
    import { MdxCard } from "@/components/mdx/mdx-card";
    
    const components: MDXComponents = {
      h1: ({ className, ...props }) => (
        <h1
          className={cn(
            "mt-2 scroll-m-20 text-4xl font-bold tracking-tight",
            className
          )}
          {...props}
        />
      ),
      h2: ({ className, ...props }) => (
        <h2
          className={cn(
            "mt-10 scroll-m-20 border-b pb-1 text-3xl font-semibold tracking-tight first:mt-0",
            className
          )}
          {...props}
        />
      ),
      h3: ({ className, ...props }) => (
        <h3
          className={cn(
            "mt-8 scroll-m-20 text-2xl font-semibold tracking-tight",
            className
          )}
          {...props}
        />
      ),
      h4: ({ className, ...props }) => (
        <h4
          className={cn(
            "mt-8 scroll-m-20 text-xl font-semibold tracking-tight",
            className
          )}
          {...props}
        />
      ),
      h5: ({ className, ...props }) => (
        <h5
          className={cn(
            "mt-8 scroll-m-20 text-lg font-semibold tracking-tight",
            className
          )}
          {...props}
        />
      ),
      h6: ({ className, ...props }) => (
        <h6
          className={cn(
            "mt-8 scroll-m-20 text-base font-semibold tracking-tight",
            className
          )}
          {...props}
        />
      ),
      a: ({ className, ...props }) => (
        <a
          className={cn("font-medium underline underline-offset-4", className)}
          {...props}
        />
      ),
      p: ({ className, ...props }) => (
        <p
          className={cn("leading-7 [&:not(:first-child)]:mt-6", className)}
          {...props}
        />
      ),
      ul: ({ className, ...props }) => (
        <ul className={cn("my-6 ml-6 list-disc", className)} {...props} />
      ),
      ol: ({ className, ...props }) => (
        <ol className={cn("my-6 ml-6 list-decimal", className)} {...props} />
      ),
      li: ({ className, ...props }) => (
        <li className={cn("mt-2", className)} {...props} />
      ),
      blockquote: ({ className, ...props }) => (
        <blockquote
          className={cn(
            "mt-6 border-l-2 pl-6 italic [&>*]:text-muted-foreground",
            className
          )}
          {...props}
        />
      ),
      img: ({
        className,
        alt,
        ...props
      }: React.ImgHTMLAttributes<HTMLImageElement>) => (
        // eslint-disable-next-line @next/next/no-img-element
        <img className={cn("rounded-md border", className)} alt={alt} {...props} />
      ),
      hr: ({ ...props }) => <hr className="my-4 md:my-8" {...props} />,
      table: ({ className, ...props }: React.HTMLAttributes<HTMLTableElement>) => (
        <div className="my-6 w-full overflow-y-auto">
          <table className={cn("w-full", className)} {...props} />
        </div>
      ),
      tr: ({ className, ...props }: React.HTMLAttributes<HTMLTableRowElement>) => (
        <tr
          className={cn("m-0 border-t p-0 even:bg-muted", className)}
          {...props}
        />
      ),
      th: ({ className, ...props }) => (
        <th
          className={cn(
            "border px-4 py-2 text-left font-bold [&[align=center]]:text-center [&[align=right]]:text-right",
            className
          )}
          {...props}
        />
      ),
      td: ({ className, ...props }) => (
        <td
          className={cn(
            "border px-4 py-2 text-left [&[align=center]]:text-center [&[align=right]]:text-right",
            className
          )}
          {...props}
        />
      ),
      pre: ({ className, ...props }) => (
        <pre
          className={cn(
            "mb-4 mt-6 overflow-x-auto rounded-lg border bg-black py-4",
            className
          )}
          {...props}
        />
      ),
      code: ({ className, ...props }) => (
        <code
          className={cn(
            "relative rounded border px-[0.3rem] py-[0.2rem] font-mono text-sm",
            className
          )}
          {...props}
        />
      ),
      Image,
      Callout,
      Card: MdxCard,
    };
    
    interface MdxProps {
      code: string;
    }
    
    export function Mdx({ code }: MdxProps) {
      const Component = useMDXComponent(code);
    
      return (
        <div className="mdx">
          <Component components={components} />
        </div>
      );
    }
    ```
    
6. å¼€å§‹å†™`mdx`æ–‡ä»¶
    
    æ ¹æ®`Contentlayer`é…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œç°åœ¨åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª`content`æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ª`about`æ–‡ä»¶å¤¹ï¼Œåœ¨`about`é‡Œåˆ›å»ºä¸¤ä¸ª`mdx`æ–‡ä»¶ï¼Œåˆ†åˆ«å«`terms.mdx`å’Œ`privacy.mdx`,
    
    ```markdown
    ---
    title: Terms
    description: Read our terms
    ---
    
    Term 1.
    
    ## Title 1
    
    content content content
    ```
    
    ```markdown
    ---
    title: Privacy
    description: Read our Privacy
    ---
    
    Privacy 1.
    
    ## Title 1
    
    content content content
    ```
    
7. åœ¨`app`æ–‡ä»¶å¤¹å†…åˆ›å»ºè·¯ç”±æ–‡ä»¶
    
    ä»`app`å¼€å§‹ï¼Œåˆ›å»ºå‡ºè¿™æ ·çš„è·¯å¾„ï¼š`app/(about)/[â€¦slug]/page.tsx`
    
    å¦‚æœä½ æƒ³ç»™`mdx`æ–‡ä»¶é¡µé¢è®¾ç½®å¸ƒå±€ï¼Œåœ¨`(about)`æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ä¸€ä¸ª`layout.tsx`å†™ä¸€ä¸‹å¸ƒå±€ï¼Œè¿™é‡Œä»…æä¾›`page.tsx`æ–‡ä»¶çš„ä»£ç 
    
    ```tsx
    // page.tsx
    import { notFound } from "next/navigation";
    import { allPosts } from "contentlayer/generated";
    
    import { Mdx } from "@/components/mdx/mdx-components";
    
    import "@/styles/mdx.css";
    import { Metadata } from "next";
    
    import { siteConfig } from "@/config/site";
    import { absoluteUrl } from "@/lib/utils";
    
    interface PageProps {
      params: {
        slug: string[];
      };
    }
    
    async function getPageFromParams(params: { slug: string[] }) {
      const slug = params?.slug?.join("/");
      const page = allPosts.find((page) => page.slugAsParams === slug);
    
      if (!page) {
        null;
      }
    
      return page;
    }
    
    // ä¸‹é¢OGçš„ä»£ç å¦‚æœé€‚ç”¨ä½ çš„é¡¹ç›®ï¼Œä½ å¯ä»¥å–æ¶ˆæ³¨é‡Š
    // export async function generateMetadata({
    //   params,
    // }: PageProps): Promise<Metadata> {
    //   const page = await getPageFromParams(params);
    
    //   if (!page) {
    //     return {};
    //   }
    
    //   const url = process.env.NEXT_PUBLIC_APP_URL;
    
    //   const ogUrl = new URL(`${url}/api/og`);
    //   ogUrl.searchParams.set("heading", page.title);
    //   ogUrl.searchParams.set("type", siteConfig.name);
    //   ogUrl.searchParams.set("mode", "light");
    
    //   return {
    //     title: page.title,
    //     description: page.description,
    //     openGraph: {
    //       title: page.title,
    //       description: page.description,
    //       type: "article",
    //       url: absoluteUrl(page.slug),
    //       images: [
    //         {
    //           url: ogUrl.toString(),
    //           width: 1200,
    //           height: 630,
    //           alt: page.title,
    //         },
    //       ],
    //     },
    //     twitter: {
    //       card: "summary_large_image",
    //       title: page.title,
    //       description: page.description,
    //       images: [ogUrl.toString()],
    //     },
    //   };
    // }
    
    export async function generateStaticParams(): Promise<PageProps["params"][]> {
      return allPosts.map((page) => ({
        slug: page.slugAsParams?.split("/"),
      }));
    }
    
    export default async function PagePage({ params }: PageProps) {
      const page = await getPageFromParams(params);
    
      if (!page) {
        notFound();
      }
    
      return (
        <article className="container max-w-3xl py-6 lg:py-12">
          <div className="space-y-4">
            <h1 className="inline-block font-heading text-4xl lg:text-5xl">
              {page.title}
            </h1>
            {page.description && (
              <p className="text-xl text-muted-foreground">{page.description}</p>
            )}
          </div>
          <hr className="my-4" />
          <Mdx code={page.body.code} />
        </article>
      );
    }
    ```
    
8. è¿è¡Œä»£ç 
    
    æ­¤æ—¶æ‰§è¡Œ`npm run dev`ä¼šå‘ç°æŠ¥é”™äº†ï¼Œæ˜¯çš„ï¼Œè¿˜å¾—ä¿®æ”¹å¯åŠ¨å‘½ä»¤å’Œæ‰“åŒ…å‘½ä»¤
    
    ```json
    // package.json
    "scripts": {
        "dev": "concurrently \"contentlayer dev\" \"next dev\"",
        "build": "contentlayer build && next build",
        "start": "next start"
      },
    ```
    
    ç°åœ¨æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼Œæ ¹ç›®å½•ä¼šå‡ºç°`.contentlayer`æ–‡ä»¶å¤¹ï¼Œå¦‚æœé‡Œé¢çš„æ–‡ä»¶å¤¹ç»“æ„æ˜¯å›¾ç‰‡è¿™æ ·çš„ï¼š
    
    ![contentlayer-example.png](/assets/006/01.png)
    
    é‚£å°±è¯´æ˜ä»¥ä¸Šé…ç½®å…¨éƒ¨æ­£ç¡®ã€‚
    
    å¦‚æœæ²¡æœ‰å‡ºç°`.contentlayer`æ–‡ä»¶å¤¹ï¼Œè¯´æ˜åŒ…ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¯ä»¥åˆ°è¿™ä¸ªissussæ¥çœ‹å¤§å®¶çš„ç»éªŒï¼š[contentlayer/issues/415](https://github.com/contentlayerdev/contentlayer/issues/415#issuecomment-1670949525)ï¼Œ`next@13.3.0`ç‰ˆæœ¬ä¸‹ï¼Œå®‰è£…`contentlayer@0.3.3`å’Œ`next-contentlayer@0.3.3`æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚
    
9. é…ç½®ä¸€ä¸‹å¿½è§†`.contentlayer`æ–‡ä»¶å¤¹
    
    ä¿®æ”¹`.prettierignore`å’Œ`.gitignore`
    
    ```bash
    // .prettierignore
    
    â€¦â€¦
    .contentlayer
    ```
    
    ```bash
    // .gitignore
    
    â€¦â€¦
    .contentlayer
    ```
    

å…¨éƒ¨é…ç½®å®Œæˆï¼å¦‚æœä½ æœ‰æ–°çš„é¡µé¢æƒ³ç”¨mdxæ¥å†™ï¼Œåªè¦åœ¨contenté‡Œæ·»åŠ æ–‡ä»¶å°±å¯ä»¥ã€‚

é…ç½®è¿‡ç¨‹æœ‰ç‚¹çƒ¦ï¼Œä½†æ˜¯é…ç½®å®Œæˆåæ˜¯çœŸçš„é¦™ã€‚

## å’ŒReact-markdownæœ‰ä»€ä¹ˆåŒºåˆ«

æœ‰äº†ä»¥ä¸Šçš„ç»éªŒï¼Œå†çœ‹`contentlayer`å’Œ`react-markdown`çš„åŒºåˆ«ï¼Œå¯ä»¥çœ‹å‡ºæ¥`contentlayer`æ˜¯é¡µé¢çº§åˆ«çš„å·¥å…·ï¼Œè€Œ`react-markdown`æ˜¯ç»„ä»¶çº§åˆ«çš„å·¥å…·ã€‚

å½“ä½ çš„é¡¹ç›®æœ‰å¤šä¸ªmdæ–‡ä»¶æ—¶ï¼Œç”¨`contentlayer`æ˜¾ç„¶æ€§ä»·æ¯”æ›´é«˜ï¼Œå› ä¸ºä½¿ç”¨`react-markdown`é™¤äº†è¦å†™mdæ–‡ä»¶ï¼Œè¿˜è¦å†™ä¸€ä¸ªé¡µé¢ç»„ä»¶åŒ…è£¹èµ·æ¥ã€‚

è€Œå½“ä½ éœ€è¦åœ¨ç»„ä»¶çº§åˆ«ä½¿ç”¨mdæ ¼å¼ï¼Œé‚£ä¹ˆè¦æœæ–­ä½¿ç”¨`react-markdown`ã€‚

## æºç ä¸æ¼”ç¤º

æºç ï¼šğŸ‘‰[contentlayer](https://github.com/weijunext/nextjs-learn-demos/tree/contentlayer)

åœ¨çº¿æ¼”ç¤ºï¼šğŸ‘‰[Contentlayer MDXæ¼”ç¤º](https://nextjs.weijunext.com/mdx-page-demo)

## ä¸“æ èµ„æº

ä¸“æ ä»‹ç»ï¼šä»¥å®æˆ˜çš„è§’åº¦è¿›è¡ŒNext.jsç”Ÿæ€åœˆçš„æŠ€æœ¯æ ˆåˆ†äº«ï¼Œå†…å®¹åŒ…æ‹¬ä½†ä¸é™äºï¼šNext.jsç†è®ºçŸ¥è¯†ã€åŠŸèƒ½æ¨¡å—è®¾è®¡æ€è·¯ã€å®æˆ˜ä¸­ä½¿ç”¨åˆ°çš„æŠ€æœ¯æ ˆã€‚è¿™æ˜¯ä¸€ä¸ªé•¿æœŸæ›´æ–°çš„ä¸“æ ï¼Œæˆ‘ä¼šæŒç»­æŠŠè‡ªå·±çš„æ€è€ƒå’Œç»éªŒæç‚¼åˆ†äº«å‡ºæ¥ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ä¸“æ ğŸ‘‡

ä¸“æ åœ°å€ï¼šğŸ‘‰[Next.jsç”Ÿæ€åœˆå®æˆ˜](/tag/NextJS%E5%AE%9E%E6%88%98)

ä¸“æ æ¼”ç¤ºç«™ï¼šğŸ‘‰[Next.js Demos](https://nextjs.weijunext.com)

ä¸“æ æºç ä»“åº“ï¼šğŸ‘‰[Github - Source Code](https://github.com/weijunext/nextjs-learn-demos)

äº¤ä¸ªæœ‹å‹ï¼šğŸ‘‰[åŠ å…¥ã€Œç‹¬ç«‹å…¨æ ˆäº¤æµç¾¤ã€](/make-a-friend)