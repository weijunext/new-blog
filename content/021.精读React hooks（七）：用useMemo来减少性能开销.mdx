---
title: ç²¾è¯»React hooksï¼ˆä¸ƒï¼‰ï¼šç”¨useMemoæ¥å‡å°‘æ€§èƒ½å¼€é”€
description: ä¸ºäº†æ›´å¥½åœ°æ»¡è¶³å¼€å‘è€…å¯¹äºç»†ç²’åº¦æ€§èƒ½æ§åˆ¶çš„éœ€æ±‚ï¼ŒReactæ¨å‡ºäº†useMemoè¿™ä¸€Hookï¼Œå…è®¸æˆ‘ä»¬é’ˆå¯¹å¤æ‚çš„è®¡ç®—è¿›è¡Œç²¾ç»†åŒ–çš„ä¼˜åŒ–ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“é‡å¤ã€‚
slug: react-hook-useMemo
slugId: 75704b53-4f6d-45db-a73b-f0cd6ce90ce9
tags: React
date: 2023-09-10
---

åœ¨å‰ç«¯æ¡†æ¶çš„æ¿€çƒˆç«äº‰ä¸­ï¼Œæ€§èƒ½å¾€å¾€è¢«è§†ä¸ºè¯„åˆ¤ä¸€ä¸ªæ¡†æ¶å¥½åçš„å…³é”®æŒ‡æ ‡ã€‚æ‹¥æœ‰å“è¶Šæ€§èƒ½çš„æ¡†æ¶å¯ä»¥ä¸ºå¼€å‘è€…åœ¨é¢å¯¹æ•°æ®å¯†é›†æˆ–é«˜åº¦äº¤äº’çš„åº”ç”¨æ—¶ï¼Œæä¾›æ›´åŠ æµç•…ã€é«˜æ•ˆçš„å¼€å‘ä½“éªŒã€‚

ä¸ºäº†æ›´å¥½åœ°æ»¡è¶³å¼€å‘è€…å¯¹äºç»†ç²’åº¦æ€§èƒ½æ§åˆ¶çš„éœ€æ±‚ï¼ŒReactæ¨å‡ºäº†`useMemo`è¿™ä¸€Hookã€‚è¿™ä¸ªå·¥å…·ä¸ºæˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æä¾›äº†ä¸€ä¸ªä¼˜é›…çš„æ‰‹æ®µï¼Œå…è®¸æˆ‘ä»¬é’ˆå¯¹å¤æ‚çš„è®¡ç®—è¿›è¡Œç²¾ç»†åŒ–çš„ä¼˜åŒ–ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“é‡å¤ã€‚æ¥ä¸‹æ¥çš„æ–‡ç« ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨`useMemo`çš„å®šä¹‰ã€ä½¿ç”¨æ–¹æ³•ä»¥åŠå¦‚ä½•åœ¨æ—¥å¸¸å¼€å‘ä¸­æœ€å¤§åŒ–åœ°å‘æŒ¥å…¶æ½œåŠ›ã€‚

## `useMemo`å®šä¹‰

`useMemo`æ˜¯Reactæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦Hookï¼Œå®ƒçš„æ ¸å¿ƒç›®çš„æ˜¯é€šè¿‡ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…åœ¨ç»„ä»¶æ¸²æŸ“æ—¶è¿›è¡Œä¸å¿…è¦çš„é‡å¤è®¡ç®—ï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½ã€‚è¿™æ„å‘³ç€åªæœ‰å½“å…¶ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`useMemo`æ‰ä¼šé‡æ–°è®¡ç®—è¿™ä¸ªå€¼ï¼Œå¦åˆ™å®ƒå°†é‡ç”¨ä¹‹å‰çš„ç»“æœã€‚

å®ƒçš„åŸºæœ¬ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š

```jsx
const cachedValue = useMemo(calculateValue, dependencies)
```

- `calculateValue`ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºè®¡ç®—æˆ‘ä»¬æƒ³è¦ç¼“å­˜çš„å€¼çš„å‡½æ•°ã€‚ä¸ºäº†ç¡®ä¿ç»“æœçš„ç¨³å®šæ€§å’Œé¢„æµ‹æ€§ï¼Œè¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚è¿™æ„å‘³ç€ï¼Œå®ƒåœ¨ç›¸åŒçš„è¾“å…¥ä¸‹æ€»æ˜¯è¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚
- `dependencies`ï¼šè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«`useMemo`æ‰€ä¾èµ–çš„å˜é‡æˆ–å€¼ã€‚å½“æ•°ç»„ä¸­çš„ä»»ä½•å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`calculateValue`å‡½æ•°å°†è¢«é‡æ–°æ‰§è¡Œã€‚

## `useMemo`åŸºç¡€ç”¨æ³•

`useMemo` æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªä¾èµ–é¡¹æ•°ç»„ã€‚

```jsx
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`computeExpensiveValue`æ˜¯ä¸€ä¸ªå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ¥è®¡ç®—çš„å‡½æ•°ã€‚æˆ‘ä»¬åªæœ‰å½“`a`æˆ–`b`æ”¹å˜æ—¶ï¼Œæ‰é‡æ–°è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¹‹å‰ç¼“å­˜çš„å€¼ã€‚

ç”¨ä¸€ä¸ªä¾‹å­æ¥çœ‹useMemoçš„æ‰§è¡Œæ—¶æœºï¼š

```jsx
import React, { useMemo, useState } from "react";

function filterUsers(users, searchTerm) {
    return users.filter((user) => user.name.includes(searchTerm));
}

function useMemoDemo() {
  const [searchTerm, setSearchTerm] = useState("");
  const [isDark, setIsDark] = useState(false);

  const allUsers = useMemo(() => {
    let list = [];
    for (let i = 1; i <= 500; i++) {
      list.push({ id: i, name: `User${i}` });
    }
    return list;
  }, []);

  const useMemoCurrentUsers = useMemo(() => {
    console.log('with useMemo')
    return filterUsers(allUsers, searchTerm);
  }, [allUsers, searchTerm]);

  return (
    <div>
      {/* æ¯ä¸€æ¬¡æ›´æ”¹æŸ¥è¯¢æ¡†å†…å®¹ï¼Œéƒ½ä¼šè§¦å‘useMemo */}
      <input
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        placeholder="Search by name..."
      />

      {/* æ¯ä¸€æ¬¡æ›´æ”¹èƒŒæ™¯è‰²ï¼Œéƒ½ä¸ä¼šè§¦å‘useMemo */}
      <button onClick={() => setIsDark((pre) => !pre)}>
        {isDark ? "Dark mode" : "Light mode"}
      </button>

      <div>
        <div>
          <h2>With useMemo</h2>
          <div style={{ background: isDark ? "#000" : "" }}>
            {useMemoCurrentUsers.map((user) => (
              <div key={user.id}>
                {user.name}
              </div>
            ))}
          </div>
        </div>
      </div>
  </div>
  );
}

export default useMemoDemo;
```

åœ¨è¿™é‡Œç®€å•çš„ç¤ºä¾‹ä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹æŸ¥è¯¢æ¡†çš„å†…å®¹ï¼Œéƒ½ä¼šè§¦å‘`searchTerm`çš„å˜åŒ–ï¼Œè¿›è€Œè§¦å‘`useMemo`é‡æ–°è®¡ç®—ï¼›è€Œç‚¹å‡»åˆ‡æ¢èƒŒæ™¯è‰²çš„æŒ‰é’®ï¼Œå› ä¸º`useMemo`çš„ä¾èµ–é¡¹æ²¡æœ‰æ›´æ–°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘`useMemo`é‡æ–°è®¡ç®—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ä¸Šä¸€æ¬¡è®¡ç®—çš„è¿”å›å€¼ã€‚

## æ˜¯å¦ä½¿ç”¨`useMemo`çš„åŒºåˆ«

ä½¿ç”¨ **`useMemo`** ä¸å¦ï¼Œç©¶ç«Ÿæœ‰ä½•å·®å¼‚ï¼Ÿå¾ˆé—æ†¾ï¼Œå¾—ç›Šäºé«˜æ•ˆçš„ç°ä»£ JavaScript å¼•æ“å’Œä¼˜ç§€çš„æµè§ˆå™¨æ€§èƒ½ï¼Œå¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ç”¨è‚‰çœ¼å‡ ä¹æ— æ³•çœ‹å‡ºæ¥åŒºåˆ«ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥åˆ°[æˆ‘çš„æ¼”ç¤ºç«™](https://nextjs.weijunext.com/hooks/useMemo)ä½“éªŒã€‚

```jsx
import React, { useMemo, useState } from "react";

function filterUsers(users, searchTerm) {
    return users.filter((user) => user.name.includes(searchTerm));
}

function Comparison1() {
  const [searchTerm, setSearchTerm] = useState("");
  const [isDark, setIsDark] = useState(false);

  const allUsers = useMemo(() => {
    let list = [];
    for (let i = 1; i <= 500; i++) {
      list.push({ id: i, name: `User${i}` });
    }
    return list;
  }, []);

  const useMemoCurrentUsers = useMemo(() => {
    console.log('with useMemo')
    return filterUsers(allUsers, searchTerm);
  }, [allUsers, searchTerm]);

  console.log('without useMemo')
  const withoutUseMemoCurrentUsers = filterUsers(allUsers, searchTerm);

  return (
    <div>
      <input
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        placeholder="Search by name..."
      />

      <button onClick={() => setIsDark((pre) => !pre)}>
        {isDark ? "Dark mode" : "Light mode"}
      </button>

      <div>
        <div>
          <h2>With useMemo</h2>
          <div style={{ background: isDark ? "#000" : "" }}>
            {useMemoCurrentUsers.map((user) => (
              <div key={user.id}>
                {user.name}
              </div>
            ))}
          </div>
        </div>
        <div>
          <h2>Without useMemo</h2>
            <div style={{ background: isDark ? "#000" : "" }}>
              {withoutUseMemoCurrentUsers.map((user) => (
                <div key={user.id}>
                  {user.name}
                </div>
              ))}
            </div>
        </div>
      </div>
    </div>
  );
}

export default Comparison1;
```

è¿™ä¸ªç¤ºä¾‹å®é™…æ•ˆæœæ˜¯æ— è®ºä½ ä¿®æ”¹æŸ¥è¯¢æ¡†å†…å®¹è¿˜æ˜¯åˆ‡æ¢èƒŒæ™¯è‰²ï¼Œå¯¹ç…§ç»„çš„å˜åŒ–å‡ ä¹æ˜¯åŒæ­¥çš„ã€‚

æ—¢ç„¶`useMemo`æ— æ³•å¸¦æ¥è§†è§‰ä¸Šçš„å·®å¼‚ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨`useMemo`ï¼Ÿå› ä¸º`useMemo`çš„å¯ä»¥åœ¨æ›´ç»†ç²’åº¦çš„å±‚é¢ä¼˜åŒ–æˆ‘ä»¬çš„åº”ç”¨æ€§èƒ½ï¼š

1. **é‡æ–°è®¡ç®—çš„å¼€é”€**ï¼š
    
    å½“æˆ‘ä»¬é¢å¯¹æ¶‰åŠå¤§é‡æ•°æ®å¤„ç†ã€å¾ªç¯æˆ–å…¶ä»–å¤æ‚é€»è¾‘çš„åœºæ™¯æ—¶ï¼Œé‡å¤ä¸å¿…è¦çš„è®¡ç®—å¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨çš„å¡é¡¿ï¼Œä»è€Œå½±å“ç”¨æˆ·ä½“éªŒã€‚
    
2. **æ¸²æŸ“çš„å¼€é”€**ï¼š
    
    å½“æˆ‘ä»¬è°ˆè®º React æ€§èƒ½æ—¶ï¼Œç»å¸¸è€ƒè™‘çš„ä¸ä»…ä»…æ˜¯è®¡ç®—çš„é€Ÿåº¦ï¼Œä½†æ›´é‡è¦çš„æ˜¯é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚å¦‚æœæŸä¸ªå­ç»„ä»¶ä¾èµ–äºä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡æˆ–æ•°ç»„åœ¨æ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“æ—¶éƒ½é‡æ–°åˆ›å»ºï¼Œå³ä½¿å®é™…çš„æ•°æ®æ²¡æœ‰æ”¹å˜ï¼Œé‚£ä¹ˆå­ç»„ä»¶ä¹Ÿä¼šä¸å¿…è¦åœ°é‡æ–°æ¸²æŸ“ã€‚
    
    åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`useMemo`å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®ä¿å¯¹è±¡æˆ–æ•°ç»„çš„å¼•ç”¨åœ¨æ•°æ®ä¸å˜æ—¶ä¿æŒä¸å˜ï¼Œä»è€Œé¿å…å­ç»„ä»¶çš„ä¸å¿…è¦æ¸²æŸ“ã€‚
    

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œ`useMemoCurrentUsers`å’Œ`withoutUseMemoCurrentUsers`éƒ½æœ‰è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯ç‚¹å‡»åˆ‡æ¢èƒŒæ™¯çš„æŒ‰é’®æ—¶ï¼Œ`useMemoCurrentUsers`æ²¡æœ‰é‡æ–°è®¡ç®—ï¼Œè€Œ`withoutUseMemoCurrentUsers`æ˜¯æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—çš„ã€‚è¿™æ°å¥½å°è¯äº†ä¸Šé¢æ‰€è¯´çš„â€œèŠ‚çœæ¸²æŸ“å¼€é”€â€ã€‚

![541shots_so.png](/assets/021/useMemo_demo.png)

## ç¼“å­˜ç»„ä»¶

`useMemo`çš„ä½œç”¨ä¸çŸ¥å±€é™äºç¼“å­˜æ•°æ®ï¼Œå®ƒè¿˜å¯ä»¥ç¼“å­˜ç»„ä»¶ã€‚

å¦‚æœä½ åœ¨æ¸²æŸ“æŸä¸ªç»„ä»¶æ—¶æœ‰æ˜‚è´µçš„è®¡ç®—ï¼Œå¹¶ä¸”ä½ æƒ³åœ¨æŸäº›ä¾èµ–æœªæ”¹å˜æ—¶é¿å…è¿™äº›è®¡ç®—ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨`useMemo`æ¥ç¼“å­˜è¿™ä¸ªç»„ä»¶ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š

```jsx
function ParentComponent(props) {
  const [someData, setSomeData] = useState(initialData);

  const MemoizedExpensiveComponent = useMemo(() => {
    return <ExpensiveComponent data={someData} />;
  }, [someData]);

  return (
    <div>
      {MemoizedExpensiveComponent}
      {/* å…¶ä»–ç»„ä»¶å’Œé€»è¾‘ */}
    </div>
  );
}
```

å¦‚æœä¸Šä¸€èŠ‚çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬æƒ³æŠŠç”¨æˆ·åˆ—è¡¨çš„ç»„ä»¶ç¼“å­˜èµ·æ¥ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š

```jsx
function UserList({ allUsers, searchTerm }) {
  const filteredUsers = filterUsers(allUsers, searchTerm);
  return (
    <>
      {useMemoCurrentUsers.map((user) => (
        <div key={user.id}>
          {user.name}
        </div>
      ))}
    </>
  );
}

function Comparison1() {
  // â€¦â€¦

  const MemoizedUserList = useMemo(() => {
    return <UserList allUsers={allUsers} searchTerm={searchTerm} />;
  }, [allUsers, searchTerm]);

  return (
    <div>
      {/* â€¦â€¦ */}
        <h2>With useMemo</h2>
        <div style={{ background: isDark ? "#000" : "" }}>
          {MemoizedUserList}
        </div>
      {/* â€¦â€¦ */}
    </div>
  );
}

export default Comparison1;
```

ç°åœ¨ï¼Œæ•´ä¸ª`UserList`ç»„ä»¶è¢«ç¼“å­˜ï¼Œåªæœ‰å½“`allUsers`ã€`searchTerm`æˆ–`isDark`å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ã€‚

é™¤äº†`useMemo`èƒ½å¤Ÿç¼“å­˜ç»„ä»¶ï¼ŒReact è¿˜æä¾›äº†`memo`è¿™ä¸ªé«˜é˜¶ç»„ä»¶æ¥å®Œæˆç›¸ä¼¼çš„å·¥ä½œã€‚

```jsx
const UserList = memo(function UserList({ allUsers, searchTerm }) {
  const filteredUsers = filterUsers(allUsers, searchTerm);
  return (
    <>
      {filteredUsers.map((user) => (
        <div key={user.id}>
          {user.name}
        </div>
      ))}
    </>
  );
});

function Comparison1() {
  // â€¦â€¦

  return (
    <div>
      {/* â€¦â€¦ */}
      <h2>With useMemo</h2>
        <div style={{ background: isDark ? "#000" : "" }}>
          <UserList allUsers={allUsers} searchTerm={searchTerm} />
        </div>
      {/* â€¦â€¦ */}
    </div>
  );
}

export default Comparison1;
```

ä½¿ç”¨`memo`é«˜é˜¶ç»„ä»¶åŒ…è£¹åï¼Œåªæœ‰å½“`props`å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ã€‚è¿™ç§æ–¹å¼å’Œä¸Šé¢ä½¿ç”¨`useMemo`ç¼“å­˜ç»„ä»¶çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä½†ä»£ç å¯è¯»æ€§æ›´å¼ºï¼Œä¹Ÿæ˜¯Reactå®˜æ–¹æ›´æ¨èçš„æ–¹å¼ã€‚

è€ƒè™‘åˆ°`useMemo`å’Œ`memo`çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆè¯´ï¼š

- å½“ä½ æƒ³é¿å…å› ä¸º**æ•°æ®å˜åŒ–**è€Œäº§ç”Ÿçš„ä¸å¿…è¦çš„**è®¡ç®—**æ—¶ï¼Œä½¿ç”¨**`useMemo`ï¼›**
- å½“ä½ æƒ³é¿å…å› ä¸º**propsæœªå˜**è€Œäº§ç”Ÿçš„ä¸å¿…è¦çš„**ç»„ä»¶é‡æ¸²æŸ“**æ—¶ï¼Œä½¿ç”¨**`memo`**ã€‚

æœ‰æ— ä½¿ç”¨`memo`çš„æ•ˆæœå¯¹æ¯”ä¹Ÿå¯ä»¥åœ¨[æˆ‘çš„æ¼”ç¤ºç«™](https://nextjs.weijunext.com/hooks/useMemo)ä½“éªŒã€‚

## ç¼“å­˜å‡½æ•°

é™¤äº†ç¼“å­˜æ•°æ®å’Œç»„ä»¶ï¼Œ`useMemo`è¿˜èƒ½å¤Ÿç¼“å­˜å‡½æ•°ã€‚ä½ åªéœ€è¦åœ¨`useMemo`é‡Œ`return`ä¸€ä¸ªå‡½æ•°å³å¯ï¼Œå¦‚ä¸‹ï¼š

```jsx
const handleUserClick = useMemo(() => {
  return (userName) => {
    alert(`Clicked on: ${userName}`);
  };
}, []);
```

ä¸è¿‡ï¼ŒReactæœ‰ä¸“é—¨ç¼“å­˜å‡½æ•°çš„hookâ€”â€”useCallbackï¼Œä¹Ÿæ˜¯ä¸‹ä¸€ç¯‡æ–‡ç« è¦ç²¾è¯»çš„hookï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ã€‚

## åä¾‹ï¼šè¿‡æ¸¡ä¼˜åŒ–

`useMemo`æ˜¯ç”¨äºä¼˜åŒ–çš„å·¥å…·ï¼Œä½†æœ‰æ—¶ï¼Œå¦‚æœè¿‡åº¦ä½¿ç”¨å®ƒä»¬ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æ›´å·®æˆ–ä»£ç æ›´åŠ å¤æ‚ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªè¿‡åº¦ä¼˜åŒ–çš„ä¾‹å­ï¼š

æƒ³è±¡è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ç»„ä»¶ï¼Œåªæ˜¾ç¤ºä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®ä¼šå¢åŠ è¿™ä¸ªæ•°å­—ã€‚

```jsx
import React, { useState, useMemo } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  const handleIncrease = useMemo(() => {
    return () => {
      setCount(count + 1);
    };
  }, [count]);

  return (
    <div>
      <div>{count}</div>
      <button onClick={handleIncrease}>Increase</button>
    </div>
  );
}

export default Counter;
```

è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼š

1. **ä¸å¿…è¦çš„å¤æ‚æ€§**ï¼šåŸå§‹çš„ç»„ä»¶æ˜¯ç®€å•çš„ï¼Œå¹¶ä¸”æ€§èƒ½è¡¨ç°å¾—å¾ˆå¥½ã€‚å¼•å…¥`useMemo`åªæ˜¯å¢åŠ äº†ä»£ç çš„å¤æ‚æ€§ï¼Œè€Œå¹¶æ²¡æœ‰å¸¦æ¥ä»»ä½•å®é™…çš„æ€§èƒ½æå‡ã€‚
2. **å¢åŠ äº†æ€§èƒ½å¼€é”€**ï¼š**`useMemo`æœ¬èº«**ä¹Ÿæœ‰å¼€é”€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»ä½•ç”±`useMemo`å¸¦æ¥çš„å°ä¼˜åŠ¿éƒ½è¢«å…¶è‡ªèº«çš„å¼€é”€æŠµæ¶ˆäº†ï¼Œå› ä¸ºæ¯æ¬¡`count`å˜åŒ–ï¼Œ`handleIncrease`éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚
3. **å¯è¯»æ€§ä¸‹é™**ï¼šå¯¹äºåæ¥æŸ¥çœ‹ä»£ç çš„å…¶ä»–å¼€å‘è€…æ¥è¯´ï¼Œçœ‹åˆ°`useMemo`å¯èƒ½ä¼šå¼•èµ·å›°æƒ‘ã€‚ä»–ä»¬å¯èƒ½ä¼šèŠ±è´¹æ—¶é—´æ€è€ƒä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦ä¼˜åŒ–ï¼Œå°½ç®¡å®é™…ä¸Šå¹¶ä¸éœ€è¦ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œä¸æ˜¯æ‰€æœ‰çš„ç»„ä»¶éƒ½éœ€è¦ä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯å½“å®ƒä»¬å·²ç»è¶³å¤Ÿç®€å•å’Œé«˜æ•ˆçš„æ—¶å€™ã€‚è¿‡åº¦ä½¿ç”¨ä¼˜åŒ–å·¥å…·å¯èƒ½ä¼šå¯¼è‡´æ›´å·®çš„æ€§èƒ½å’Œæ›´ä½çš„ä»£ç å¯è¯»æ€§ã€‚

## ç»“è¯­

ä½¿ç”¨`useMemo`çš„å…³é”®æ˜¯æƒè¡¡ã€‚å…¶ç›®çš„æ˜¯é¿å…ä¸å¿…è¦çš„è®¡ç®—ï¼Œä½†ä¹Ÿè¦æ³¨æ„ä¸è¦æ»¥ç”¨ï¼Œå› ä¸ºç»´æŒè¿™äº›ç¼“å­˜å€¼ä¹Ÿæ˜¯æœ‰å¼€é”€çš„ã€‚æœ€ä½³çš„åšæ³•æ˜¯å…ˆå†™å‡ºæ¸…æ™°å’Œå¯è¯»çš„ä»£ç ï¼Œç„¶ååœ¨æ€§èƒ½ç“¶é¢ˆå‡ºç°æ—¶ï¼Œå†è€ƒè™‘ä¼˜åŒ–ã€‚

æœ¬æ–‡å¯¹ç…§ç¤ºä¾‹å‡å¯åœ¨[æˆ‘çš„æ¼”ç¤ºç«™](https://nextjs.weijunext.com/hooks/useMemo)ä½“éªŒï¼ŒTypeScriptç‰ˆæºç åœ¨[æˆ‘çš„Github](https://github.com/weijunext/nextjs-learn-demos/tree/useMemo)æŸ¥çœ‹


## ä¸“æ èµ„æº

ä¸“æ åšå®¢åœ°å€ï¼š[ç²¾è¯»React Hooks](/tag/React)

ä¸“æ æ¼”ç¤ºç«™ï¼š[React Hooks Demos](https://nextjs.weijunext.com/hooks)

ä¸“æ æºç ä»“åº“ï¼šğŸ‘‰[Github - Source Code](https://github.com/weijunext/nextjs-learn-demos)

äº¤ä¸ªæœ‹å‹ï¼šğŸ‘‰[åŠ å…¥ã€Œç‹¬ç«‹å…¨æ ˆäº¤æµç¾¤ã€](/make-a-friend)

ä¸“æ æ–‡ç« åˆ—è¡¨ï¼š

[ç²¾è¯»React hooksï¼ˆä¸€ï¼‰ï¼šuseState çš„å‡ ä¸ªåŸºç¡€ç”¨æ³•å’Œè¿›é˜¶æŠ€å·§](/article/react-hook-useState)

[ç²¾è¯»React hooksï¼ˆäºŒï¼‰ï¼šReactçŠ¶æ€ç®¡ç†çš„å¼ºå¤§å·¥å…·â€”â€”useReducer](/article/react-hook-useReducer)

[ç²¾è¯»React hooksï¼ˆä¸‰ï¼‰ï¼šuseContextä»åŸºç¡€åº”ç”¨åˆ°æ€§èƒ½ä¼˜åŒ–](/article/react-hook-useContext)

[ç²¾è¯»React hooksï¼ˆå››ï¼‰ï¼šuseRefçš„å¤šç»´ç”¨é€”](/article/react-hook-useRef)

[ç²¾è¯»React hooksï¼ˆäº”ï¼‰ï¼šuseEffectä½¿ç”¨ç»†èŠ‚çŸ¥å¤šå°‘ï¼Ÿ](/article/react-hook-useEffect)

[ç²¾è¯»React hooksï¼ˆå…­ï¼‰ï¼šuseLayoutEffectè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ](/article/react-hook-useLayoutEffect)

[ç²¾è¯»React hooksï¼ˆä¸ƒï¼‰ï¼šç”¨useMemoæ¥å‡å°‘æ€§èƒ½å¼€é”€](/article/react-hook-useMemo)

[ç²¾è¯»React hooksï¼ˆå…«ï¼‰ï¼šæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦useCallback](/article/react-hook-useCallback)

[ç²¾è¯»React hooksï¼ˆä¹ï¼‰ï¼šä½¿ç”¨useTransitionè¿›è¡Œéé˜»å¡æ¸²æŸ“](/article/react-hook-useTransition)

[ç²¾è¯»React hooksï¼ˆåï¼‰ï¼šä½¿ç”¨useDeferredValueå»¶è¿ŸçŠ¶æ€æ›´æ–°](/article/react-hook-useDeferredValue)

[ç²¾è¯»React hooksï¼ˆåä¸€ï¼‰ï¼šuseInsertionEffectâ€”â€”CSS-in-JSæ ·å¼æ³¨å…¥æ–°æ–¹å¼](/article/react-hook-useInsertionEffect)

[ç²¾è¯»React hooksï¼ˆåäºŒï¼‰ï¼šä½¿ç”¨useImperativeHandleèƒ½è·å¾—ä»€ä¹ˆèƒ½åŠ›](/article/react-hook-useImperativeHandle)

[ç²¾è¯»React hooksï¼ˆåä¸‰ï¼‰ï¼šä½¿ç”¨useSyncExternalStoreè·å–å®æ—¶æ•°æ®](/article/react-hook-useSyncExternalStore)

[ç²¾è¯»React hooksï¼ˆåå››ï¼‰ï¼šæ€»æœ‰ä¸€å¤©ä½ ä¼šéœ€è¦useIdä¸ºä½ ç”Ÿæˆå”¯ä¸€id](/article/react-hook-useId)

[ç²¾è¯»React hooksï¼ˆåäº”ï¼‰ï¼šæŠŠuseDebugValueåŠ å…¥ä½ çš„Reactè°ƒè¯•å·¥å…·åº“](/article/react-hook-useDebugValue)

[ç²¾è¯»React hooksï¼ˆåå…­ï¼‰ï¼šä¸€ä¸ªä¸ºä»£ç ä¼˜é›…è€Œç”Ÿçš„hookâ€”â€”use](/article/react-hook-use)