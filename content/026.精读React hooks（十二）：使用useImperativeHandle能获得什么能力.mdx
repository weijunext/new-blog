---
title: ç²¾è¯»React hooksï¼ˆåäºŒï¼‰ï¼šä½¿ç”¨useImperativeHandleèƒ½è·å¾—ä»€ä¹ˆèƒ½åŠ›
description: useImperativeHandleæä¾›äº†ä¸€ç§ç²¾ç¡®æ§åˆ¶ç»„ä»¶å¯¹å¤–æš´éœ²çš„èƒ½åŠ›ï¼Œæœ‰äº†å®ƒï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾å®ç°å¯¹ç»„ä»¶çš„ç»†ç²’åº¦æ§åˆ¶å’Œé«˜åº¦å°è£…ã€‚
slug: react-hook-useImperativeHandle
slugId: 9e8ce44c-238d-4eb7-b194-69493ac7c3e5
tags: React
date: 2023-09-17
---

åœ¨ React å¼€å‘ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„äº¤äº’å¤§å¤šåŸºäº props å’Œ stateã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦æ›´ç›´æ¥åœ°è®¿é—®ä¸€ä¸ªç»„ä»¶çš„å†…éƒ¨æ–¹æ³•æˆ–å±æ€§ï¼Œä¾‹å¦‚ï¼Œå¤–éƒ¨æ§åˆ¶ä¸€ä¸ªè‡ªå®šä¹‰è¾“å…¥ç»„ä»¶çš„ç„¦ç‚¹ã€‚è¿™æ—¶ï¼ŒRefs å°±æ´¾ä¸Šç”¨åœºï¼ˆå­¦ä¹  useRefğŸ‘‰ã€Š[ç²¾è¯»React hookï¼ˆå››ï¼‰ï¼šuseRefçš„å¤šç»´ç”¨é€”](/article/useRef)ã€‹ï¼‰ï¼Œä½† Refs æœ¬èº«çš„åŠŸèƒ½æ˜¯æœ‰é™çš„ï¼Œå®ƒé»˜è®¤åªèƒ½è®¿é—® DOM èŠ‚ç‚¹æˆ–ç»„ä»¶å®ä¾‹ã€‚è¿™æ—¶ï¼Œå¦‚ä½•è‡ªå®šä¹‰æˆ‘ä»¬æƒ³è¦æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹æ–¹æ³•æˆ–å±æ€§å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä½¿ç”¨`useImperativeHandle`ã€‚

`useImperativeHandle`æ˜¯ä¸€ä¸ªç›¸å¯¹å°‘ç”¨ä½†å¿…è¦çš„æ—¶å€™èƒ½è®©ä½ çš„ React ä»£ç æ›´çµæ´»çš„ hookï¼Œæœ¬æ–‡æˆ‘ä»¬å°±æ¥æ¢è®¨ä¸€ä¸‹`useImperativeHandle`çš„ä½¿ç”¨æ–¹æ³•å’Œä½¿ç”¨åœºæ™¯ã€‚

## `useImperativeHandle`çš„ä½¿ç”¨

`useImperativeHandle`é€šå¸¸ä¸`forwardRef`ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¾¿å°† ref ä¼ é€’ç»™å‡½æ•°ç»„ä»¶ï¼Œç”¨æ³•å®šä¹‰å¦‚ä¸‹ï¼š

```jsx
const ForwardRefChildComponents = forwardRef(function ChildComponents(props, ref) {
  useImperativeHandle(ref, () => {
    return {
      // ... your methods ...
    };
  }, []);
})
```

### åŸºç¡€ç¤ºä¾‹

æƒ³è±¡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªè‡ªå®šä¹‰è¾“å…¥ç»„ä»¶ï¼Œä½ æƒ³ä¸ºå…¶æä¾›ä¸€ä¸ªæ–¹æ³•æ¥æ¸…é™¤è¾“å…¥å†…å®¹ï¼Œä½†ä¸æƒ³æš´éœ²æ•´ä¸ªç»„ä»¶æˆ– DOM èŠ‚ç‚¹ã€‚

```jsx
const ForwardedCustomInput = forwardRef(function CustomInput(props, ref) {
  const inputRef = useRef();

  useImperativeHandle(ref, () => ({
    clear: () => {
      inputRef.current.value = '';
    }
  }));

  return <input ref={inputRef} />;
})
```

ç°åœ¨ï¼Œå½“ä½ ä½¿ç”¨`ForwardedCustomInput`å¹¶ä¸ºå…¶æä¾›ä¸€ä¸ª ref æ—¶ï¼Œä½ å¯ä»¥ç›´æ¥è°ƒç”¨`clear`æ–¹æ³•

```jsx
function App() {
  const inputRef = useRef();

  return (
    <div>
      <ForwardedCustomInput ref={inputRef} />
      <button onClick={() => inputRef.current.clear()}>Clear Input</button>
    </div>
  );
}
```

å½“æˆ‘ä»¬ç‚¹å‡» "Clear Input" æŒ‰é’®æ—¶ï¼Œè¾“å…¥æ¡†çš„å†…å®¹å°†è¢«æ¸…é™¤ï¼Œè¿™ç§å®ç°æ–¹å¼è®©æˆ‘ä»¬æ²¡æœ‰æ“ä½œ DOM èŠ‚ç‚¹ä¹Ÿèƒ½æ“ä½œå®Œæˆæ“ä½œã€‚

çº¿ä¸Šç¤ºä¾‹å¯ä»¥åˆ°ğŸ‘‰[æˆ‘çš„æ¼”ç¤ºç«™](https://nextjs.weijunext.com/hooks/useImperativeHandle)ä½“éªŒã€‚

### åº”ç”¨åœºæ™¯

å°½ç®¡`useImperativeHandle`èƒ½è®©ä½ çš„ React åº”ç”¨å˜å¾—æ›´çµæ´»ï¼Œä½†ä½ ä¸åº”è¯¥ä¸ºäº†è¿™æ ·çš„çµæ´»è€Œè¿‡åº¦ä½¿ç”¨ã€‚

æœ‰ä¸€æ¡å‡†åˆ™å¯ä»¥è¯´æ˜ä½•æ—¶ä½¿ç”¨`useImperativeHandle`â€”â€”å¦‚æœä½¿ç”¨ props å¯ä»¥è§£å†³çš„åœºæ™¯éƒ½ä¸è¦ä½¿ç”¨ refsï¼Œä¹Ÿå°±æ— éœ€ä½¿ç”¨`useImperativeHandle`ã€‚

ä½ åº”è¯¥åªåœ¨ç¡®å®éœ€è¦è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼æ—¶ä½¿ç”¨`useImperativeHandle`ã€‚ä¾‹å¦‚ä»¥ä¸‹åœºæ™¯ï¼š

- æ»šåŠ¨åˆ°èŠ‚ç‚¹
- èšç„¦èŠ‚ç‚¹
- è§¦å‘åŠ¨ç”»ï¼šä½ å¯èƒ½æœ‰ä¸€ä¸ªç»„ä»¶è´Ÿè´£ç®¡ç†å¤æ‚çš„åŠ¨ç”»ï¼Œä½ å¯ä»¥ä½¿ç”¨`useImperativeHandle`æ¥æš´éœ²`start`å’Œ`stop`ç­‰æ§åˆ¶æ–¹æ³•ã€‚
- é€‰æ‹©æ–‡æœ¬

### ä¼˜åŠ¿å’Œå±€é™

ä½¿ç”¨ `useImperativeHandle`å¯ä»¥å¸¦æ¥çš„å¥½å¤„

- **æ›´å¥½çš„å°è£…**ï¼šä½ å¯ä»¥åªæš´éœ²ä½ æƒ³è®©çˆ¶ç»„ä»¶è®¿é—®çš„ç‰¹å®šæ–¹æ³•æˆ–å±æ€§ã€‚
- **æ›´å¤šçš„æ§åˆ¶**ï¼šä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶ç»„ä»¶çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯ä¾èµ–äºçŠ¶æ€æˆ–å±æ€§çš„å˜åŒ–ã€‚

å®ƒçš„å±€é™æ€§åŠæ½œåœ¨é£é™©

- **è¿‡åº¦ä½¿ç”¨**ï¼šè¿‡åº¦ä¾èµ–`useImperativeHandle`å¯èƒ½ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚
- **å¯èƒ½å¼•èµ·ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“**ï¼šå¦‚æœä¾èµ–äºå¤–éƒ¨å˜é‡æˆ–çŠ¶æ€ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ä½¿ç”¨`useCallback`æˆ–`useMemo`å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘è¿™æ ·çš„é‡æ–°æ¸²æŸ“ã€‚

## ç»“è¯­

`useImperativeHandle`æä¾›äº†ä¸€ç§ç²¾ç¡®æ§åˆ¶ç»„ä»¶å¯¹å¤–æš´éœ²çš„èƒ½åŠ›ï¼Œæœ‰äº†å®ƒï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾å®ç°å¯¹ç»„ä»¶çš„ç»†ç²’åº¦æ§åˆ¶å’Œé«˜åº¦å°è£…ã€‚


## ä¸“æ èµ„æº

ä¸“æ åšå®¢åœ°å€ï¼š[ç²¾è¯»React Hooks](/tag/React)

ä¸“æ æ¼”ç¤ºç«™ï¼š[React Hooks Demos](https://nextjs.weijunext.com/hooks)

ä¸“æ æºç ä»“åº“ï¼šğŸ‘‰[Github - Source Code](https://github.com/weijunext/nextjs-learn-demos)

äº¤ä¸ªæœ‹å‹ï¼šğŸ‘‰[åŠ å…¥ã€Œç‹¬ç«‹å…¨æ ˆäº¤æµç¾¤ã€](/make-a-friend)

ä¸“æ æ–‡ç« åˆ—è¡¨ï¼š

[ç²¾è¯»React hooksï¼ˆä¸€ï¼‰ï¼šuseState çš„å‡ ä¸ªåŸºç¡€ç”¨æ³•å’Œè¿›é˜¶æŠ€å·§](/article/react-hook-useState)

[ç²¾è¯»React hooksï¼ˆäºŒï¼‰ï¼šReactçŠ¶æ€ç®¡ç†çš„å¼ºå¤§å·¥å…·â€”â€”useReducer](/article/react-hook-useReducer)

[ç²¾è¯»React hooksï¼ˆä¸‰ï¼‰ï¼šuseContextä»åŸºç¡€åº”ç”¨åˆ°æ€§èƒ½ä¼˜åŒ–](/article/react-hook-useContext)

[ç²¾è¯»React hooksï¼ˆå››ï¼‰ï¼šuseRefçš„å¤šç»´ç”¨é€”](/article/react-hook-useRef)

[ç²¾è¯»React hooksï¼ˆäº”ï¼‰ï¼šuseEffectä½¿ç”¨ç»†èŠ‚çŸ¥å¤šå°‘ï¼Ÿ](/article/react-hook-useEffect)

[ç²¾è¯»React hooksï¼ˆå…­ï¼‰ï¼šuseLayoutEffectè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ](/article/react-hook-useLayoutEffect)

[ç²¾è¯»React hooksï¼ˆä¸ƒï¼‰ï¼šç”¨useMemoæ¥å‡å°‘æ€§èƒ½å¼€é”€](/article/react-hook-useMemo)

[ç²¾è¯»React hooksï¼ˆå…«ï¼‰ï¼šæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦useCallback](/article/react-hook-useCallback)

[ç²¾è¯»React hooksï¼ˆä¹ï¼‰ï¼šä½¿ç”¨useTransitionè¿›è¡Œéé˜»å¡æ¸²æŸ“](/article/react-hook-useTransition)

[ç²¾è¯»React hooksï¼ˆåï¼‰ï¼šä½¿ç”¨useDeferredValueå»¶è¿ŸçŠ¶æ€æ›´æ–°](/article/react-hook-useDeferredValue)

[ç²¾è¯»React hooksï¼ˆåä¸€ï¼‰ï¼šuseInsertionEffectâ€”â€”CSS-in-JSæ ·å¼æ³¨å…¥æ–°æ–¹å¼](/article/react-hook-useInsertionEffect)

[ç²¾è¯»React hooksï¼ˆåäºŒï¼‰ï¼šä½¿ç”¨useImperativeHandleèƒ½è·å¾—ä»€ä¹ˆèƒ½åŠ›](/article/react-hook-useImperativeHandle)

[ç²¾è¯»React hooksï¼ˆåä¸‰ï¼‰ï¼šä½¿ç”¨useSyncExternalStoreè·å–å®æ—¶æ•°æ®](/article/react-hook-useSyncExternalStore)

[ç²¾è¯»React hooksï¼ˆåå››ï¼‰ï¼šæ€»æœ‰ä¸€å¤©ä½ ä¼šéœ€è¦useIdä¸ºä½ ç”Ÿæˆå”¯ä¸€id](/article/react-hook-useId)

[ç²¾è¯»React hooksï¼ˆåäº”ï¼‰ï¼šæŠŠuseDebugValueåŠ å…¥ä½ çš„Reactè°ƒè¯•å·¥å…·åº“](/article/react-hook-useDebugValue)

[ç²¾è¯»React hooksï¼ˆåå…­ï¼‰ï¼šä¸€ä¸ªä¸ºä»£ç ä¼˜é›…è€Œç”Ÿçš„hookâ€”â€”use](/article/react-hook-use)