---
title: CSSæŠ€å·§ï¼šç”¨CSS + SVG foreignObjectå®ç°ä¸€ä¸ªåŠ¨ç”»ç»„ä»¶
description: åœ¨SVGé‡Œé¢ä½¿ç”¨HTML+CSSåˆ¶ä½œä½ çš„åŠ¨ç”»å¡ç‰‡ï¼Œå­¦å®Œå°±å¯ä»¥å»ç‚«ä½ çš„åˆ›æ„äº†
slug: animated-svg-component
tags: CSSæŠ€å·§
date: 2023-11-29
visible: invisible
---

![demoæ¼”ç¤º.gif](/assets/039/demo1.gif)

å½“æˆ‘æ”¶åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œè¦æ±‚åšå‡ºå¦‚ä¸Šå›¾ä¸€æ ·çš„æ–‡å­—æ‘‡æ›³çš„SVGï¼Œæˆ‘çš„è„‘å­é‡Œé—ªè¿‡svgã€pathã€groupã€textâ€¦â€¦ç­‰ç­‰SVGçš„æ ‡ç­¾ï¼Œè¿™å¤ªè®©äººå´©æºƒäº†ã€‚

SVGå¤šéº»çƒ¦ï¼Œéš¾é“ä¸èƒ½ç”¨div+cssåŠ¨ç”»æ¥åšå—ï¼ŸSVGæœ‰æ²¡æœ‰å…¼å®¹å‰ç«¯å¼€å‘ä¹ æƒ¯çš„å†™æ³•å‘¢ï¼Ÿ

è¯¶ï¼Œè¿˜çœŸæœ‰ï¼ŒSVGçš„ `<foreignObject>` å…ƒç´ å°±æ”¯æŒåœ¨é‡Œé¢å†™HTMLå’ŒCSSã€‚

æ¬¢è¿åŠ å…¥ã€ŒğŸŒ[ç‹¬ç«‹å…¨æ ˆå¼€å‘äº¤æµç¾¤](/make-a-friend)ã€ï¼Œä¸€èµ·å­¦ä¹ äº¤æµå‰ç«¯å’ŒNodeç«¯æŠ€æœ¯

## SVGä¸`foreignObject`

å¦‚æœä½ çœ‹è¿‡SVGçš„ä»£ç ï¼Œä¸€å®šæ³¨æ„åˆ°äº†ï¼Œæ¯ä¸ªSVGéƒ½æœ‰ä¸€ä¸ª `xmlns="http://www.w3.org/2000/svg` è¿™æ ·çš„å±æ€§ï¼Œè¿™å°±æ˜¯å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ã€‚å¦‚æœä¸ç»™svgæ ‡ç­¾æ·»åŠ å‘½åç©ºé—´ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå½“ä½œæ–‡æœ¬æ¥è¯†åˆ«ï¼Œä¸ä¿¡è¯•è¯•è¿™ä¸¤ä¸ªSVGï¼š

- ğŸ‘‰[å¸¦xmlnsçš„å›¾ç‰‡.svg](https://weijunext.com/avatar.svg)
- ğŸ‘‰[ä¸å¸¦xmlnsçš„å›¾ç‰‡.svg](https://weijunext.com/avatar-no-ns.svg)

å‘½åæ ‡ç­¾çš„ä½œç”¨æ˜¯å‘Šè¯‰æµè§ˆå™¨åº”å½“ä»¥ä½•ç§æ ‡å‡†è¿›è¡Œè§£æï¼ŒSVGæ ‡ç­¾ç¼ºå°‘å‘½åç©ºé—´çš„æƒ…å†µä¸‹é»˜è®¤ä¸å±äºä»»ä½•ç‰¹å®šçš„è¯­è¨€æˆ–æ ¼å¼ï¼Œæ‰€ä»¥æµè§ˆä¸ä¼šæŠŠå®ƒä½œä¸ºå›¾å½¢æ¸²æŸ“ï¼Œè€Œæ˜¯è¢«è§†ä¸ºæ™®é€šçš„æ–‡æœ¬ã€‚

é‚£ä¹ˆï¼Œ`<foreignObject>` åˆæ˜¯ä»ä½•è€Œæ¥ï¼Œæ€ä¹ˆä½¿ç”¨ï¼Ÿ

`<foreignObject>` æ˜¯SVG 1.1è§„èŒƒä¸­å¼•å…¥çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå…è®¸åœ¨SVGæ–‡æ¡£ä¸­åµŒå…¥å…¶ä»–XMLå‘½åç©ºé—´çš„å…ƒç´ ï¼Œå¦‚ï¼šXHTMLã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥åœ¨SVGä¸­ä½¿ç”¨HTMLå’ŒCSSäº†ã€‚

å®ƒçš„ç”¨æ³•æ˜¯è¿™æ ·ï¼š

```html
<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
	<foreignObject x="20" y="20" width="160" height="160">
		<div xmlns="http://www.w3.org/1999/xhtml">
			<!-- HTML å’Œ CSS ä»£ç  -->
		</div>
	</foreignObject>
</svg>
```

`<div>` é‡ŒæŒ‡å®šå‘½åç©ºé—´åœ¨HTML5æ ‡å‡†ä¸‹ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†ä¸ºäº†ä»£ç è§„èŒƒï¼Œä»ç„¶å»ºè®®åŠ ä¸Šã€‚

## åŠ¨ç”»å®ç°

çŸ¥é“äº† `<foreignObject>` çš„ç”¨æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç”¨ `CSS + <foreignObject>`çš„æ–¹å¼æ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠ¨ç”»äº†ã€‚

ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰é¡¹ä»»åŠ¡ï¼š

- èƒŒæ™¯åŠ¨æ€æ¸å˜
- æ–‡å­—æ‘‡æ›³å’Œæ·¡å…¥
- å†…å®¹å¯é…ç½®

### èƒŒæ™¯åŠ¨æ€æ¸å˜

èƒŒæ™¯åŠ¨æ€æ¸å˜çš„åŠ¨ç”»å¯ä»¥é€šè¿‡CSSå…³é”®å¸§ï¼ˆ`@keyframes`ï¼‰æ¥å®ç°ã€‚

```css

@keyframes gradientBackground {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animate-gradient {
  animation: gradientBackground 10s ease infinite;
  background: 'linear-gradient(-45deg, #fc5c7d, #6a82fb, #05dfd7)';
  background-size: 600% 400%;
  width: 100%;
  height: 100%;
}
```

- åœ¨ `animate-gradient` é‡Œé¢ï¼Œ`animation` å®šä¹‰äº† `gradientBackground` çš„åŠ¨ç”»æ–¹å¼ï¼Œ`infinite` è¡¨ç¤ºæ— é™é‡å¤
- `linear-gradient` å®šä¹‰äº†æ¸å˜é¢œè‰²
- æŠŠ `background-size` æ”¾å¤§ï¼Œè®©å¯è§†åŒºåŸŸçš„é¢œè‰²æ›´å°‘ï¼Œåœ¨åŠ¨ç”»æ¨è¿›çš„æ—¶å€™æ‰ä¼šæœ‰æ›´å¹³æ»‘å´åˆå¼ºçƒˆçš„è§†è§‰æ•ˆæœ
- é€šè¿‡ `@keyframes` å®šä¹‰ä¸€ä¸ªåŠ¨ç”» `gradientBackground` ï¼Œå¹¶ç»™äº†å‘¨æœŸä½ç½®å˜åŒ–

å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š

![ç¬¬1æ­¥ï¼šèƒŒæ™¯.gif](/assets/039/1.gif)

### æ–‡å­—æ‘‡æ›³å’Œæ·¡å…¥

æ–‡å­—æ‘‡æ›³ä¹Ÿé€šè¿‡CSSå…³é”®å¸§ï¼ˆ `@keyframes`ï¼‰æ¥å®ç°ã€‚

```css
@keyframes rotate {
  0% { transform: rotate(3deg); }
  100% { transform: rotate(-3deg); }
}
.animate-rotate {
  animation: rotate ease-in-out 1s infinite alternate;
}
```

- é€šè¿‡ `@keyframes` å®šä¹‰æ‘‡æ›³çš„è§’åº¦
- é€šè¿‡ `animation` å®šä¹‰æ–‡å­—æ‘‡æ›³åŠ¨ç”»æ•ˆæœï¼Œ`alternate` æŒ‡ç¤ºåŠ¨ç”»åº”è¯¥åœ¨æ¯æ¬¡è¿­ä»£åæ”¹å˜æ–¹å‘

å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š

![ç¬¬2æ­¥ï¼šæ–‡å­—æ‘‡æ›³.gif](/assets/039/2.gif)

ç•™ä¸ªä½œä¸šï¼šè¯·å®Œæˆåº•éƒ¨å°å­—çš„æ·¡å…¥æ•ˆæœã€‚

### å†…å®¹å¯é…ç½®

æˆ‘è§‰å¾—è¿™ä¸ªåŠ¨ç”»å¡ç‰‡è¿˜æ˜¯æŒºé€šç”¨çš„ï¼Œæ‰€ä»¥æˆ‘å†³å®šåšæˆå¯é…ç½®çš„ç»„ä»¶ã€‚

æˆ‘å¸Œæœ›å¡ç‰‡å¤§å°ã€æ–‡å­—å†…å®¹å’Œä¸€äº›é‡è¦çš„æ ·å¼å‡å¯é…ç½®ï¼ŒTypeScriptå®šä¹‰å°±å‡ºæ¥äº†ï¼š

```tsx
interface AnimatedSvgComponentProps {
  width?: number;
  height?: number;
  titleSize?: string; // Tailwind CSS æ–‡æœ¬å¤§å°ç±»
  titleText?: string;
  paragraphSize?: string;
  paragraphText?: string;
  paragraphLink?: string; //é“¾æ¥å±æ€§
  enableAnimation?: boolean;
  backgroundColors?: string[];
  textColor?: string;
}
```

å› ä¸ºæˆ‘ä¸ªäººé¡¹ç›®ä½¿ç”¨çš„æ˜¯Next.jså’ŒTailwindCSSï¼Œæ‰€ä»¥å°±å¯¼å‡ºä¸ªReactç»„ä»¶ã€‚è°ƒæ•´åçš„ç»„ä»¶ä»£ç æ˜¯è¿™æ ·ï¼š

```tsx
import React from "react";

const AnimatedSvgComponent: React.FC<AnimatedSvgComponentProps> = ({
  width = 800,
  height = 400,
  titleSize = "text-5xl", // é»˜è®¤ Tailwind æ–‡æœ¬å¤§å°
  titleText = "Animated SVG<br/>with React & Tailwind", // é»˜è®¤æ ‡é¢˜
  paragraphSize = "text-xl", // é»˜è®¤ Tailwind æ–‡æœ¬å¤§å°
  paragraphText = "Click to see the source", // é»˜è®¤æ®µè½æ–‡æœ¬
  paragraphLink, // é“¾æ¥ï¼Œé»˜è®¤ä¸ºç©º
  enableAnimation = true,
  backgroundColors = ["#fc5c7d", "#6a82fb", "#05dfd7"],
  textColor = "text-white",
}) => {
  const backgroundGradient = `linear-gradient(-45deg, ${backgroundColors.join(
    ", "
  )})`;

  // åˆ›å»ºå¸¦æœ‰æ­£ç¡®æ¢è¡Œçš„æ ‡é¢˜
  const renderedTitle = titleText.split("<br/>").map((line, index) => (
    <React.Fragment key={index}>
      {line}
      <br />
    </React.Fragment>
  ));

  // ç”Ÿæˆæ®µè½æ–‡æœ¬æˆ–é“¾æ¥
  const renderedParagraph =
    paragraphLink && paragraphText ? (
      <a
        href={paragraphLink}
        target="_blank"
        rel="noopener noreferrer"
        className={paragraphSize}
      >
        {paragraphText}
      </a>
    ) : (
      <p className={paragraphSize}>{paragraphText}</p>
    );

  return (
    <svg
      fill="none"
      viewBox={`0 0 ${width} ${height}`}
      height={height}
      width={width}
      xmlns="http://www.w3.org/2000/svg"
    >
      <foreignObject height={height} width={width}>
        <div>
          <style>
            {`
              @keyframes rotate {
                0% { transform: rotate(3deg); }
                100% { transform: rotate(-3deg); }
              }

              @keyframes gradientBackground {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
              }

              @keyframes fadeIn {
                0% { opacity: 0; }
                66% { opacity: 0; }
                100% { opacity: 1; }
              }

              .animate-gradient {
                animation: gradientBackground 10s ease infinite;
                background-size: 600% 400%;
              }

              .animate-rotate {
                animation: rotate ease-in-out 1s infinite alternate;
              }

              .animate-fadeIn {
                animation: fadeIn 3s ease 0s normal forwards;
              }

              .animated-svg-card {
                height: ${height}px;
                width: ${width}px;
                background: ${backgroundGradient};
                background-size: 600% 400%;
                animation: gradientBackground 10s ease infinite;
              }
            `}
          </style>
          <div
            className={`animated-svg-card w-full h-full flex flex-col items-center justify-center m-0 rounded-md ${
              enableAnimation ? "animate-gradient" : ""
            } ${textColor}`}
          >
            <h1
              className={`${titleSize} uppercase text-shadow ${
                enableAnimation ? "animate-rotate" : ""
              }`}
            >
              {renderedTitle}
            </h1>
            {renderedParagraph}
          </div>
        </div>
      </foreignObject>
    </svg>
  );
};

export default AnimatedSvgComponent;
```

é…ç½®è¿˜æœ‰å¯ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä½ å¯ä»¥å¤åˆ¶ä»£ç æŒ‰è‡ªå·±çš„éœ€æ±‚è¿›è¡Œæ”¹é€ ã€‚

å¦‚æœä½ ä¸ç”¨TailwindCSSï¼Œå¯ä»¥åˆ°æˆ‘çš„æºç ä»“åº“è·å–[å†…è”CSSç‰ˆçš„ç»„ä»¶](https://github.com/weijunext/nextjs-learn-demos/blob/AnimatedSvg/components/AnimatedSvgComponent-no-tw.tsx)ã€‚

## ç»“è¯­

å­¦ä¼šäº† `<foreignObject>` çŸ¥è¯†ï¼Œä½ è¿˜ä¸èµ¶ç´§ç‚«ä¸€ä¸‹è‡ªå·±çš„åˆ›æ„ï¼Ÿ

æœ¬æ–‡æºç ï¼šğŸ‘‰[AnimatedSvg](https://github.com/weijunext/nextjs-learn-demos/tree/AnimatedSvg)

æœ¬æ–‡ä½“éªŒåœ°å€ï¼šğŸ‘‰[åœ¨çº¿æ¼”ç¤º](https://nextjs.weijunext.com/)

å‘½åç©ºé—´ï¼ˆnamespaceï¼‰åŸºç¡€ï¼šğŸ‘‰[å¿«é€Ÿäº†è§£namespace](https://developer.mozilla.org/en-US/docs/Web/SVG/Namespaces_Crash_Course)

