---
title: å¦‚ä½•ä¼˜é›…åœ°å¤„ç†ç¬¬ä¸‰æ–¹ç½‘ç«™é«˜æ¸… Logo æ˜¾ç¤ºï¼Ÿ
description: å­¦ä¹ å¦‚ä½•ä¼˜é›…åœ°å¤„ç†ç¬¬ä¸‰æ–¹ç½‘ç«™é«˜æ¸…Logoæ˜¾ç¤ºé—®é¢˜ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†ä¸€ä¸ªå¥å£®çš„Reactç»„ä»¶å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å¤šé‡å¤‡é€‰å›¾æ ‡æºã€åŠ è½½çŠ¶æ€å ä½ç¬¦ã€è¶…æ—¶å¤„ç†æœºåˆ¶å’Œä¼˜é›…çš„é™çº§æ˜¾ç¤ºã€‚é€šè¿‡å®é™…æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•è§£å†³faviconæ ¼å¼ä¸ä¸€ã€å›¾æ ‡åŠ è½½å¤±è´¥ç­‰å¸¸è§é—®é¢˜ã€‚
slug: handle-third-party-website-logo-react
tags: NextJS,ç»„ä»¶
date: 2025-01-17
visible: invisible
---

ä»Šå¤©æ­£å¼å‘å¸ƒäº†æˆ‘çš„ç¬¬ä¸€ä¸ªæ–°æ ‡ç­¾é¡µæ’ä»¶ï¼š[nTab](https://ntab.dev/)

![Next Idea NewTab](/assets/064/og.webp)

è¿™æ˜¯ä¸€ä¸ªä¸ºå¼€å‘è€…ã€ç‹¬ç«‹å¼€å‘è€…é‡èº«æ‰“é€ çš„æ–°æ ‡ç­¾é¡µæ’ä»¶ï¼Œä¸»è¦åŠŸèƒ½åˆ†3ä¸ªæ¨¡å—ï¼š

- ç²¾é€‰çš„ä¼˜è´¨å¼€æºé¡¹ç›®ï¼Œåˆ†æé¡¹ç›®æ½œåœ¨çš„å•†æœºï¼Œå¸®åŠ©å¼€å‘è€…æ‰¾åˆ°Idea
- å®æ—¶æ›´æ–°çš„ GitHub Trendingï¼Œä¸é”™è¿‡å½“ä¸‹çƒ­é—¨é¡¹ç›®
- å¼€å‘è€…å·¥å…·ç®±ï¼Œé«˜æ•ˆä¾¿æ·

æœ‰äº†è¿™ä¸ªæ’ä»¶ï¼Œæ¯æ¬¡æ‰“å¼€æµè§ˆå™¨éƒ½èƒ½æŸ¥æ‰¾æ–° ideaï¼Œä¸€ä¸‹å­ç¼©çŸ­äº†ä¿¡æ¯è·å–è·¯å¾„ã€‚

> æ’ä»¶å·¦ä¾§çš„ä¼˜è´¨å¼€æºé¡¹ç›®æ¥æºäºæˆ‘çš„å¼€æºé¡¹ç›®å¯¼èˆªç«™ï¼š[Next Idea](https://nextidea.dev/)

è¿™ç¯‡åšå®¢çš„ä¸»è¦ç›®çš„ä¸æ˜¯ä»‹ç»æ’ä»¶ï¼Œæ˜¯è¦è®²ä¸€ä¸ªæ’ä»¶é‡Œå‡ºç°çš„ä¸€ä¸ª bugã€‚

## bugæè¿°

åœ¨æ’ä»¶çš„å³ä¾§ï¼Œæ˜¯ä¸€å¤§æ‰¹å·¥å…·çš„å±•ç¤ºï¼Œæ¯ä¸ªå·¥å…·éƒ½éœ€è¦æ˜¾ç¤º logoï¼Œé—®é¢˜æ°æ°å‡ºç°åœ¨ logo çš„å±•ç¤ºä¸Šã€‚

logo æœ€åˆçš„å±•ç¤ºæ–¹æ¡ˆæ˜¯ï¼Œæ‰‹åŠ¨ä»ç¬¬ä¸‰æ–¹ç½‘ç«™é‡Œæ‰¾åˆ°é«˜æ¸… logo åœ°å€ï¼Œå¦‚æœæ²¡æœ‰é«˜æ¸… logoï¼Œåˆ™ä½¿ç”¨ https://favicon.im çš„æœåŠ¡è·å–logoã€‚è¿™ä¸ªæ–¹æ¡ˆåœ¨æˆ‘æµ‹è¯•çš„æ—¶å€™æ²¡å‘ç°é—®é¢˜ï¼Œä¸Šçº¿åæœ‰ç”¨æˆ·åé¦ˆé¡µé¢ä¸Šå‡ºç° bugï¼š

![bug](/assets/064/bug-2.webp)

æˆ‘ç¬¬ä¸€ååº”å°±çŸ¥é“å’Œå›½å†…ç½‘ç»œè¿æ¥ favicon.im çš„ç¨³å®šæ€§æœ‰å…³ã€‚

è§£å†³è¿™ä¸ª bug çš„æ€è·¯ä¹Ÿç®€å•ï¼š

- æ‰¾åˆ°é«˜æ¸…çš„ Logo
- åšå¥½å›é€€æ–¹æ¡ˆ

## è¡¨æ¼”ä¸€ä¸‹AIç¼–ç¨‹

å¯åŠ¨ Claudeï¼Œå‘é€ â€œæˆ‘çš„äº§å“é‡Œè¦å±•ç¤ºä¸åŒç½‘ç«™çš„é«˜æ¸… logoï¼Œå¹¶ä¸”è¦åšå¥½å›é€€æ–¹æ¡ˆï¼Œç»™æˆ‘å†™ä¸€ä¸ª React ç»„ä»¶â€ã€‚

Claude å°±å¼€å‘åˆ†æå¦‚ä½•æ‰¾åˆ°é«˜æ¸… logoï¼š
- åŠ è½½ `https://${domain}/apple-touch-icon.png`
- åˆ©ç”¨ Googleã€DuckDuckGo ç­‰ç¬¬ä¸‰æ–¹æœåŠ¡æŠ“å–

å¹¶ä¸”æä¾›äº†ä¸€ä»½ç»„ä»¶ä»£ç ï¼š

```tsx
import React, { useState } from 'react';

const WebsiteLogo = ({ domain, size = 32, className = "" }) => {
  const [imgSrc, setImgSrc] = useState(`https://${domain}/apple-touch-icon.png`);
  const [fallbackIndex, setFallbackIndex] = useState(0);
  
  const fallbackSources = [
    `https://${domain}/apple-touch-icon.png`,
    `https://${domain}/apple-touch-icon-precomposed.png`,
    `https://www.google.com/s2/favicons?domain=${domain}&sz=64`,
    `https://icons.duckduckgo.com/ip3/${domain}.ico`,
    `https://${domain}/favicon.ico`,
  ];

  const handleError = () => {
    const nextIndex = fallbackIndex + 1;
    if (nextIndex < fallbackSources.length) {
      setFallbackIndex(nextIndex);
      setImgSrc(fallbackSources[nextIndex]);
    }
  };

  return (
    <img 
      src={imgSrc}
      alt={`${domain} logo`}
      width={size}
      height={size}
      onError={handleError}
      className={`inline-block ${className}`}
      style={{ objectFit: 'contain' }}
    />
  );
};

export default WebsiteLogo;
```

è¿™ä¸ªç»„ä»¶å·²ç»å®ç°äº†è‡ªåŠ¨å¤„ç†é”™è¯¯å’Œé™çº§æ–¹æ¡ˆï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰å¤§å°å’Œæ ·å¼ï¼Œçœ‹èµ·æ¥å·²ç»å¯è¡Œäº†ã€‚

ä½†æ˜¯å’±ä»¬å¯æ˜¯ç¨‹åºå‘˜ï¼Œå“ªèƒ½è¢« AI ç³Šå¼„ï¼Œç»§ç»­é­æ‰“ï¼Œè¦æ±‚åœ¨åŠ è½½çŠ¶æ€æ·»åŠ å ä½ç¬¦ã€logo å±•ç¤ºè¦æœ‰è¿‡æ¸¡æ•ˆæœã€æä¾›å…œåº•çš„å›é€€æ–¹æ¡ˆï¼Œå¹¶ä¸”æ¯ä¸ªå›é€€æ–¹æ¡ˆåªç»™1ç§’åŠ è½½æ—¶é—´ï¼Œè¶…å‡ºå³å½“ä½œå¤±è´¥ï¼Œå»æ‰¾ä¸‹ä¸€ä¸ªå›é€€æ–¹æ¡ˆã€‚

è¿™æ ·ä¸€ä»½éå¸¸å¥å£®çš„ç¬¬ä¸‰æ–¹ç½‘ç«™ logo å±•ç¤ºçš„ç»„ä»¶å°±å®ç°å¥½äº†ï¼Œä»£ç æˆ‘æ”¾åœ¨å¼€æºé¡¹ç›® [nextjs-15-starter](https://github.com/weijunext/nextjs-15-starter/blob/main/components/WebsiteLogo.tsx) äº†ï¼Œä»“åº“çš„[æ¼”ç¤ºç½‘ç«™](https://starter.weijunext.com/)ä¹Ÿèƒ½ä½“éªŒæ•ˆæœã€‚

æ ¸å¿ƒå¤„ç†æ–¹æ³•åœ¨è¿™é‡Œï¼š

```tsx
  useEffect(() => {
    let timeoutId

    if (isLoading) {
      timeoutId = setTimeout(() => {
        handleError()
      }, timeout)
    }

    return () => {
      if (timeoutId) {
        clearTimeout(timeoutId)
      }
    }
  }, [imgSrc, isLoading])

  const handleError = () => {
    const nextIndex = fallbackIndex + 1
    if (nextIndex < fallbackSources.length) {
      setFallbackIndex(nextIndex)
      setImgSrc(fallbackSources[nextIndex])
      setIsLoading(true)
    } else {
      setHasError(true)
      setIsLoading(false)
    }
  }
```

ç°åœ¨ç»„ä»¶å°±å®Œæˆäº†å¦‚ä¸‹ä»»åŠ¡ï¼š
- å¤šé‡å¤‡é€‰å›¾æ ‡æºï¼Œç¡®ä¿æœ€å¤§ç¨‹åº¦æ˜¾ç¤ºæˆåŠŸ
- åŠ è½½çŠ¶æ€æ˜¾ç¤ºå ä½ç¬¦
- è¶…æ—¶å¤„ç†æœºåˆ¶
- ä¼˜é›…çš„é™çº§æ˜¾ç¤ºï¼ˆä½¿ç”¨åŸŸåé¦–å­—æ¯ï¼‰
- å¯è‡ªå®šä¹‰å¤§å°å’Œæ ·å¼

è½»æ¾è§£å†³ä¸åŒç½‘ç«™çš„faviconæ ¼å¼ä¸ä¸€ã€å›¾æ ‡æ— æ³•åŠ è½½ã€åŠ è½½è¶…æ—¶ç­‰ç­‰ç—›ç‚¹ã€‚

<Aside>

æœ€åï¼Œæ¬¢è¿å¼€å‘è€…ä»¬ä½¿ç”¨æˆ‘çš„æ–°æ ‡ç­¾é¡µæ’ä»¶  
æ’ä»¶å®˜ç½‘ğŸ‘‰ https://ntab.dev/  
å®‰è£…åœ°å€ğŸ‘‰ https://chromewebstore.google.com/detail/next-idea-newtab/gneedaehihepidbpdenhmlmgpdaiaepo
</Aside>


## å…³äºæˆ‘

ğŸ§‘â€ğŸ’»ç‹¬ç«‹å¼€å‘ï½œâ›µï¸å‡ºæµ·ï½œNext.jsæ‰‹è‰ºäºº

ğŸ–¥ï¸åšè¿‡å¼€æºï¼šhttp://github.com/weijunext  
âŒ¨ï¸å†™è¿‡åšå®¢ï¼šhttps://weijunext.com  
ğŸ› ï¸ä»Šå¹´æƒ³åšç‹¬ç«‹äº§å“å’Œè¯¾ç¨‹  
ğŸ“˜Nextjsä¸­æ–‡æ–‡æ¡£ï¼šhttp://nextjscn.org  
ğŸ“™å…¨æ ˆå¼€å‘æ•™ç¨‹ï¼šhttps://ship.weijunext.com  

æ¬¢è¿åœ¨ä»¥ä¸‹å¹³å°å…³æ³¨æˆ‘ï¼š

- Twitter: [@weijunext](https://x.com/weijunext)
- Github: [Github](https://github.com/weijunext)
- Blog: [Jå®éªŒå®¤](https://weijunext.com/)
- å³åˆ»: [BigYeç¨‹æ™®](https://m.okjike.com/users/13EF1128-B51B-4D22-8B95-16BB406529F0)
- å¾®ä¿¡äº¤æµç¾¤: [å…¨æ ˆäº¤æµç¾¤](/make-a-friend)

