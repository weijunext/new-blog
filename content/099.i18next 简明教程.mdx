---
title: i18next ç®€æ˜æ•™ç¨‹
description: example
slug: example
tags: NextJS,NextJSå®æˆ˜,i18n
date: 2025-01-15
---

## æ ¸å¿ƒæ¦‚å¿µ

### åˆå§‹åŒ– API (i18next.init)

è¿™æ˜¯ä½¿ç”¨ i18next çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚init æ–¹æ³•ç”¨äºåˆå§‹åŒ– i18next å®ä¾‹ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šé…ç½®é€‰é¡¹å’Œå›è°ƒå‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª Promiseã€‚

```
i18next.init({
  fallbackLng: 'en',        // è®¾ç½®å›é€€è¯­è¨€
  ns: ['file1', 'file2'],   // å®šä¹‰å‘½åç©ºé—´
  defaultNS: 'file1',       // è®¾ç½®é»˜è®¤å‘½åç©ºé—´
  debug: true               // å¯ç”¨è°ƒè¯•æ¨¡å¼
}, (err, t) => {
  if (err) return console.log('åˆå§‹åŒ–å¤±è´¥:', err);
  t('key'); // ä½¿ç”¨ç¿»è¯‘å‡½æ•°
});
```

è¿™é‡Œæœ‰å‡ ä¸ªé‡è¦çš„æ³¨æ„ç‚¹ï¼š

- åˆå§‹åŒ–æ˜¯å¼‚æ­¥çš„ï¼Œä½ å¿…é¡»ç­‰å¾…å®ƒå®Œæˆæ‰èƒ½ä½¿ç”¨ç¿»è¯‘åŠŸèƒ½
- å¯ä»¥ä½¿ç”¨å›è°ƒå‡½æ•°æˆ– Promise æ–¹å¼å¤„ç†åˆå§‹åŒ–
- ä¸è¦å¤šæ¬¡è°ƒç”¨ initï¼Œå¦‚æœéœ€è¦æ›´æ”¹è¯­è¨€ï¼Œåº”è¯¥ä½¿ç”¨ changeLanguage æ–¹æ³•

å¦‚æœä½¿ç”¨ä¸“é—¨çš„é›†æˆåº“ï¼ˆå¦‚ react-i18nextï¼‰æ¥å¤„ç†åˆå§‹åŒ–å’ŒåŠ è½½çŠ¶æ€ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨ç®¡ç†ç¿»è¯‘èµ„æºçš„åŠ è½½å’Œç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œä¹Ÿå°±ä¸éœ€è¦æ˜¾å¼åœ°å¤„ç†å›è°ƒã€‚

éœ€è¦å›è°ƒå‡½æ•°çš„æƒ…å†µï¼š

- å½“ä½ ä½¿ç”¨åç«¯æ’ä»¶ï¼ˆå¦‚ i18next-http-backendï¼‰åŠ¨æ€åŠ è½½ç¿»è¯‘æ–‡ä»¶æ—¶
- éœ€è¦ç¡®ä¿åœ¨ç¿»è¯‘åŠ è½½å®Œæˆåæ‰æ‰§è¡ŒæŸäº›æ“ä½œæ—¶
- éœ€è¦å¤„ç†åŠ è½½é”™è¯¯çš„æƒ…å†µæ—¶

ä¸¾ä¸ªå®é™…çš„ä¾‹å­ï¼š

```
// åœºæ™¯ 1ï¼šæ™®é€šé¡µé¢ç¿»è¯‘ï¼Œæ— éœ€ç­‰å¾…
i18next.init({
  fallbackLng: 'en',
  resources: {
    en: {
      translation: {
        "welcome": "Welcome!"
      }
    }
  }
});

// åœºæ™¯ 2ï¼šéœ€è¦ç­‰å¾…è¿œç¨‹ç¿»è¯‘æ–‡ä»¶åŠ è½½
i18next
  .use(Backend)
  .init({
    fallbackLng: 'en',
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json'
    }
  }, (err, t) => {
    if (err) {
      console.log('ç¿»è¯‘åŠ è½½å¤±è´¥:', err);
      return;
    }
    // åœ¨è¿™é‡Œåˆå§‹åŒ–ä¾èµ–ç¿»è¯‘çš„ç»„ä»¶
    initializeApp();
  });
```

### æ’ä»¶ç³»ç»Ÿ (i18next.use)

i18next é‡‡ç”¨æ’ä»¶åŒ–è®¾è®¡ï¼Œå¯ä»¥é€šè¿‡ use æ–¹æ³•åŠ è½½å„ç§åŠŸèƒ½æ’ä»¶ï¼š

```
import i18next from 'i18next';
import Backend from 'i18next-http-backend';
import Cache from 'i18next-localstorage-cache';
import LanguageDetector from 'i18next-browser-languagedetector';

i18next
  .use(Backend)           // åç«¯æ’ä»¶ï¼Œç”¨äºåŠ è½½ç¿»è¯‘æ–‡ä»¶
  .use(Cache)            // ç¼“å­˜æ’ä»¶ï¼Œæå‡æ€§èƒ½
  .use(LanguageDetector) // è¯­è¨€æ£€æµ‹æ’ä»¶
  .init(options);
```

### ç¿»è¯‘æ ¸å¿ƒåŠŸèƒ½ (t å‡½æ•°)

t å‡½æ•°æ˜¯æœ€å¸¸ç”¨çš„ç¿»è¯‘æ–¹æ³•ï¼Œå®ƒæ”¯æŒï¼š

1. å•ä¸ªé”®å€¼æŸ¥æ‰¾ï¼ši18next.t('my.key')
2. å¤šé”®å€¼å›é€€ï¼ši18next.t(['unknown.key', 'my.key'])

é…åˆ getFixedTï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºé¢„è®¾äº†è¯­è¨€æˆ–å‘½åç©ºé—´çš„ç¿»è¯‘å‡½æ•°ï¼š

```
// å›ºå®šä½¿ç”¨å¾·è¯­
const deTranslator = i18next.getFixedT('de');
deTranslator('myKey');

// å›ºå®šä½¿ç”¨ç‰¹å®šå‘½åç©ºé—´
const nsTranslator = i18next.getFixedT(null, 'namespace');
nsTranslator('key'); // æ— éœ€å†™ 'namespace:key'
```

### å‘½åç©ºé—´

è®©æˆ‘é€šè¿‡ä¸€ä¸ªå®é™…çš„é¡¹ç›®åœºæ™¯æ¥è§£é‡Šå‘½åç©ºé—´ï¼ˆNamespaceï¼‰çš„æ¦‚å¿µå’Œä½œç”¨ã€‚

æƒ³è±¡ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™ï¼Œè¿™ä¸ªç½‘ç«™åŒ…å«å¤šä¸ªä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼šå•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€ç”¨æˆ·è´¦æˆ·ç­‰ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„ç¿»è¯‘éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¾ˆå¿«å°±ä¼šå˜å¾—éš¾ä»¥ç®¡ç†ã€‚è¿™æ—¶å€™ï¼Œå‘½åç©ºé—´å°±æ´¾ä¸Šç”¨åœºäº†ã€‚

è®©æˆ‘é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜ï¼š

```
// åˆå§‹åŒ– i18nextï¼Œè®¾ç½®å¤šä¸ªå‘½åç©ºé—´
i18next.init({
  lng: 'zh-CN', // è®¾ç½®é»˜è®¤è¯­è¨€
  // å£°æ˜æˆ‘ä»¬è¦ä½¿ç”¨çš„å‘½åç©ºé—´
  ns: ['product', 'cart', 'user'],
  // è®¾ç½®é»˜è®¤çš„å‘½åç©ºé—´
  defaultNS: 'product',
  // é¢„åŠ è½½çš„ç¿»è¯‘èµ„æº
  resources: {
    'zh-CN': {
      // å•†å“ç›¸å…³çš„ç¿»è¯‘
      product: {
        title: 'å•†å“è¯¦æƒ…',
        price: 'ä»·æ ¼',
        stock: 'åº“å­˜',
        addToCart: 'åŠ å…¥è´­ç‰©è½¦'
      },
      // è´­ç‰©è½¦ç›¸å…³çš„ç¿»è¯‘
      cart: {
        title: 'è´­ç‰©è½¦',
        total: 'æ€»è®¡',
        checkout: 'ç»“ç®—',
        empty: 'è´­ç‰©è½¦æ˜¯ç©ºçš„'
      },
      // ç”¨æˆ·è´¦æˆ·ç›¸å…³çš„ç¿»è¯‘
      user: {
        login: 'ç™»å½•',
        register: 'æ³¨å†Œ',
        profile: 'ä¸ªäººèµ„æ–™',
        orders: 'æˆ‘çš„è®¢å•'
      }
    },
    'en': {
      product: {
        title: 'Product Details',
        price: 'Price',
        stock: 'Stock',
        addToCart: 'Add to Cart'
      },
      cart: {
        title: 'Shopping Cart',
        total: 'Total',
        checkout: 'Checkout',
        empty: 'Your cart is empty'
      },
      user: {
        login: 'Login',
        register: 'Register',
        profile: 'Profile',
        orders: 'My Orders'
      }
    }
  }
});
```

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™äº›å‘½åç©ºé—´ï¼š

```
// 1. ä½¿ç”¨é»˜è®¤å‘½åç©ºé—´ï¼ˆproductï¼‰
i18next.t('title');  // è¿”å›"å•†å“è¯¦æƒ…"

// 2. æ˜ç¡®æŒ‡å®šå‘½åç©ºé—´
i18next.t('cart:title');  // è¿”å›"è´­ç‰©è½¦"
i18next.t('user:login');  // è¿”å›"ç™»å½•"

// 3. è·å–å›ºå®šå‘½åç©ºé—´çš„ç¿»è¯‘å‡½æ•°
const cartT = i18next.getFixedT(null, 'cart');
cartT('total');  // è¿”å›"æ€»è®¡"
cartT('checkout');  // è¿”å›"ç»“ç®—"
```

å‘½åç©ºé—´çš„ä¸»è¦ä¼˜åŠ¿ï¼š

#### 1. ç»„ç»‡ç»“æ„æ¸…æ™°ï¼š

```
// å•†å“ç»„ä»¶
function ProductComponent() {
  // åªå…³æ³¨å•†å“ç›¸å…³çš„ç¿»è¯‘
  return (
    <div>
      <h1>{i18next.t('product:title')}</h1>
      <p>{i18next.t('product:price')}: Â¥99</p>
    </div>
  );
}

// è´­ç‰©è½¦ç»„ä»¶
function CartComponent() {
  // åªå…³æ³¨è´­ç‰©è½¦ç›¸å…³çš„ç¿»è¯‘
  const { t } = i18next.getFixedT(null, 'cart');
  return (
    <div>
      <h2>{t('title')}</h2>
      <p>{t('total')}: Â¥199</p>
    </div>
  );
}
```


#### 2. æŒ‰éœ€åŠ è½½ï¼š

```
// åªåœ¨éœ€è¦æ—¶åŠ è½½ç‰¹å®šçš„å‘½åç©ºé—´
i18next.loadNamespaces('user').then(() => {
  // ç”¨æˆ·ç›¸å…³çš„åŠŸèƒ½å°±ç»ª
  showUserProfile();
});
```


#### 3. å›¢é˜Ÿåä½œï¼š

ä¸åŒçš„å›¢é˜Ÿæˆå‘˜å¯ä»¥è´Ÿè´£ä¸åŒçš„å‘½åç©ºé—´ï¼Œå‡å°‘å†²çªï¼š

```
// team-a è´Ÿè´£å•†å“æ¨¡å—
const productTranslations = {
  'zh-CN': {
    product: { /* å•†å“ç¿»è¯‘ */ }
  }
};

// team-b è´Ÿè´£è´­ç‰©è½¦æ¨¡å—
const cartTranslations = {
  'zh-CN': {
    cart: { /* è´­ç‰©è½¦ç¿»è¯‘ */ }
  }
};
```

å®é™…é¡¹ç›®ä¸­çš„æœ€ä½³å®è·µï¼š

```
// 1. åˆ›å»ºä¸“é—¨çš„ç¿»è¯‘æ–‡ä»¶
// locales/zh-CN/product.json
{
  "title": "å•†å“è¯¦æƒ…",
  "price": "ä»·æ ¼"
}

// 2. ä½¿ç”¨åç«¯æ’ä»¶åŠ¨æ€åŠ è½½
i18next
  .use(Backend)
  .init({
    ns: ['product', 'cart', 'user'],
    defaultNS: 'product',
    backend: {
      // åŠ¨æ€åŠ è½½ç¿»è¯‘æ–‡ä»¶
      loadPath: '/locales/{{lng}}/{{ns}}.json'
    }
  });

// 3. æ£€æŸ¥å‘½åç©ºé—´æ˜¯å¦åŠ è½½å®Œæˆ
if (i18next.hasLoadedNamespace('user')) {
  // å¯ä»¥å®‰å…¨ä½¿ç”¨ç”¨æˆ·ç›¸å…³çš„ç¿»è¯‘
}
```


### è¯­è¨€æ§åˆ¶

i18next æä¾›äº†å®Œæ•´çš„è¯­è¨€æ§åˆ¶æœºåˆ¶ï¼š

```
// æ”¹å˜è¯­è¨€
i18next.changeLanguage('zh-CN').then(t => {
  console.log('è¯­è¨€å·²åˆ‡æ¢åˆ°ä¸­æ–‡');
});

// è·å–å½“å‰è¯­è¨€
console.log(i18next.language);        // å½“å‰è¯­è¨€
console.log(i18next.languages);       // è¯­è¨€å›é€€é“¾
console.log(i18next.resolvedLanguage); // è§£æåçš„ä¸»è¦è¯­è¨€
```

### èµ„æºç®¡ç†

i18next æä¾›äº†å¼ºå¤§çš„èµ„æºç®¡ç†åŠŸèƒ½ï¼š

```
// åŠ¨æ€åŠ è½½å‘½åç©ºé—´
i18next.loadNamespaces(['ns1', 'ns2']).then(() => {
  console.log('æ–°çš„å‘½åç©ºé—´å·²åŠ è½½');
});

// é‡æ–°åŠ è½½èµ„æº
i18next.reloadResources(['zh-CN'], ['namespace1']);

// æ·»åŠ æ–°çš„ç¿»è¯‘èµ„æº
i18next.addResourceBundle('zh-CN', 'namespace', {
  key: 'value'
}, true, true);
```
### äº‹ä»¶ç³»ç»Ÿ

i18next é€šè¿‡äº‹ä»¶ç³»ç»Ÿè®©æˆ‘ä»¬èƒ½å¤Ÿç›‘æ§å„ç§çŠ¶æ€å˜åŒ–ï¼š

```
// åˆå§‹åŒ–å®Œæˆäº‹ä»¶
i18next.on('initialized', options => {
  console.log('i18next å·²åˆå§‹åŒ–');
});

// è¯­è¨€æ”¹å˜äº‹ä»¶
i18next.on('languageChanged', lng => {
  console.log(`è¯­è¨€å·²æ›´æ”¹ä¸º: ${lng}`);
});

// å–æ¶ˆè®¢é˜…äº‹ä»¶
i18next.off('languageChanged', myHandler);
```



## å…³äºæˆ‘

ğŸ§‘â€ğŸ’»ç‹¬ç«‹å¼€å‘ï½œâ›µï¸å‡ºæµ·ï½œNext.jsæ‰‹è‰ºäºº

ğŸ–¥ï¸åšè¿‡å¼€æºï¼šhttp://github.com/weijunext  
âŒ¨ï¸å†™è¿‡åšå®¢ï¼šhttps://weijunext.com  
ğŸ› ï¸ä»Šå¹´æƒ³åšç‹¬ç«‹äº§å“å’Œè¯¾ç¨‹  
ğŸ“˜Nextjsä¸­æ–‡æ–‡æ¡£ï¼šhttp://nextjscn.org  
ğŸ“™å…¨æ ˆå¼€å‘æ•™ç¨‹ï¼šhttps://ship.weijunext.com  

æ¬¢è¿åœ¨ä»¥ä¸‹å¹³å°å…³æ³¨æˆ‘ï¼š

- Twitter: [@weijunext](https://x.com/weijunext)
- Github: [Github](https://github.com/weijunext)
- Blog: [Jå®éªŒå®¤](https://weijunext.com/)
- å³åˆ»: [BigYeç¨‹æ™®](https://m.okjike.com/users/13EF1128-B51B-4D22-8B95-16BB406529F0)
- å¾®ä¿¡äº¤æµç¾¤: [å…¨æ ˆäº¤æµç¾¤](/make-a-friend)

